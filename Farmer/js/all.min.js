function signupController(e,t,o,n){var r=this,a=e.$parent.$parent,i=angular.element(document.querySelector(".signup-modal"));r.showCaptcha=!1,r.captcha_url=a.loadSignupCaptcha?"":a.captcha_url,r.captcha_0=a.loadSignupCaptcha?"":a.captcha_0,r.showSignupForm=!0,r.captcha_public_key=CAPTCHA_PUBLIC_KEY,r.passwordInputType="password",r.showHidePasswordClass="view",r.hideShowPassword=function(){r.passwordInputType="password"===r.passwordInputType?"text":"password",r.showHidePasswordClass="view"===r.showHidePasswordClass?"hide":"view"},r.member_referral_active="True"===MEMBER_REFERAL_ACTIVE,r.back=function(){r.showSignupForm=!0,a.showNavTabs=!0},r.captcha_public_key||(r.showCaptcha=!0),r.reset_captcha=function(){o.get_captcha_url().then(function(e){r.captcha_url=e.data.captcha_url,a.captcha_url=r.captcha_url,r.captcha_0=e.data.captcha_challenge,a.captcha_0=r.captcha_0,r.captcha_1=""})},r.showSocialSignupForm=function(e){r.isfbSignup="fb"===e,r.referralSocialErrorMsg="",r.member_referral_active?(a.showNavTabs=!1,r.showSignupForm=!1):r.redirectToSocialService(!1)},r.doSocialRedirect=function(){r.isfbSignup?o.fb_login("reg",r.referralCodeSocial):o.gplus_login("reg",r.referralCodeSocial)},r.redirectToSocialService=function(e){if(e){r.referralSocialErrorMsg="";var t={ref_code:r.referralCodeSocial};o.getRequest("/auth/valid-referral-code/",t,a).then(function(e){e.data.valid?r.doSocialRedirect():r.referralSocialErrorMsg="Invalid referral code"})}else r.doSocialRedirect()},a.loadSignupCaptcha&&(r.reset_captcha(),a.loadSignupCaptcha=!1),r.reset_form=function(){r.reset_captcha(),e.signupForm.$setPristine(),e.signupForm.$setUntouched()},r.show_server_error=function(e){Object.keys(e).forEach(function(t){t in r.error_messages&&(r.error_messages[t]=e[t][0])})},r.signupSubmit=function(e,t){if(e&&r.isPasswordValid){var s={firstname:r.fname,lastname:r.lname,email:r.email,password:r.password,Submit:"LOG IN",next:"/",captcha_0:r.captcha_0,captcha_1:r.captcha_1,captcha_2:t,referral_code:r.referral?r.referral:""};r.error_messages={email:"",referral:"",captcha:""},o.submitForm(s,"/auth/signup/",a).then(function(e){void 0!==e.data.redirect&&e.data.redirect?(a.redirect(),a.close()):(r.reset_form(),r.show_server_error(e.data),i.addClass("shake"),n(function(){i.removeClass("shake")},500))})}else i.addClass("shake"),n(function(){i.removeClass("shake")},500)},r.validateOldCaptcha=function(e){r.captcha_0&&r.captcha_1&&r.signupSubmit(e,!0)},r.signup=function(t){r.captcha_public_key?grecaptcha.ready(function(){grecaptcha.execute(CAPTCHA_PUBLIC_KEY,{action:"signup"}).then(function(o){fetch("/post_recaptcha/",{method:"post",headers:{"Content-Type":"application/json","X-CSRFToken":$.cookie("csrftoken"),"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({token:o,action:"signup"})}).then(function(o){return o.ok?o.json():(r.showCaptcha=!0,e.$digest(),r.validateOldCaptcha(t,!0),console.log("Something went wrong with recaptcha call!!!"),void 0)}).then(function(o){"200"!==o.status?(r.showCaptcha=!0,e.$digest(),r.validateOldCaptcha(t,!0)):(r.showCaptcha=!1,r.signupSubmit(t,!1))})})}):(r.showCaptcha=!0,e.$digest(),r.validateOldCaptcha(t,!0))},r.checkPassword=function(e){r.isPasswordValid=e>0},r.donotAllowSpecialChars=function(e){e.key.search(/^[a-zA-Z0-9\s]+$/)==-1&&e.preventDefault()}}function make_req_url(e){return("https:"==window.location.protocol?"/auth":"")+e}function get_cookie(e){var t=document.cookie.indexOf(e);if(t>-1){var o=document.cookie.indexOf("=",t)+2,n=document.cookie.indexOf('"',o);return document.cookie.substring(o,n)}return null}function initializeKaptureSupport(){if("object"==typeof Kapchat)return initKapchat();var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://www.adjetter.com/static/assets/global/plugins/supportmessenger/js/kapturecustomersupport.v2.min.js",t.onload=initKapchat,e.appendChild(t)}function initKapchat(){if(!get_cookie("_bb_mid"))return!1;var e=$.ajax({url:"/get_kptur/",method:"GET"});e.done(function(e){"use strict";t(e.ency,e.kkye)});var t=function(e,t){Kapchat.initialize({customercode:e,key:"183456e7b3122af0e470176ba2d207a4",iv:t,context:"kapchat-widget-btn",label:"Customer Support",widget:"kp_widget_tk",success:function(){},error:function(e){console.log(e)}})}}!function(){"use strict";angular.module("app",["app.core","app.layout","app.customPage","app.engagementStore","app.GiftCard"])}(),function(){"use strict";angular.module("app.core",["ngSanitize","ngAnimate","ui.bootstrap","ui.select"])}(),function(){"use strict";function e(e){e.lazySizesConfig=e.lazySizesConfig||{},e.lazySizesConfig.srcAttr="data-src",e.lazySizesConfig.srcsetAttr="data-srcset"}e.$inject=["$window"],angular.module("app.customPage",["ui.scrollpoint"]).run(e)}(),function(){"use strict";angular.module("app.engagementStore",[])}(),function(){"use strict";angular.module("app.GiftCard",[])}(),function(){"use strict";angular.module("app.layout",["ngCookies"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ngRoute","blocks.logger"])}(),function(){"use strict";function e(e,t,o,n){o.useApplyAsync(!0),e.debugEnabled&&e.debugEnabled(!1),t.startSymbol("{[{"),t.endSymbol("}]}"),o.defaults.xsrfCookieName="csrftoken",o.defaults.xsrfHeaderName="X-CSRFToken",o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",o.defaults.headers.post["X-CSRFToken"]=$.cookie("csrftoken"),n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|bigbasket):/)}e.$inject=["$logProvider","$interpolateProvider","$httpProvider","$compileProvider"];var t=angular.module("app.core"),o={appErrorPrefix:"[Bigbasket Error] ",appTitle:"Custom Page",version:"1.0.0"};t.value("config",o),t.config(e),t.config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1}).hashPrefix("!")}]),t.constant("R",R),t.constant("toastr",toastr)}(),function(){"use strict";function e(e,t,o,n,r,a){function i(){return function(e){(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n.channel="mobile")}(navigator.userAgent||navigator.vendor||window.opera),n.channel}function s(e){e.bgColor=void 0==e.bgColor?"#fff":e.bgColor,e.colorStop1=void 0==e.colorStop1?"#fff":e.colorStop1,e.colorStop2=void 0==e.colorStop2?"#fff":e.colorStop2,"bgImage"==e.bgOption&&void 0==e.picFile&&(e.bgOption="plainColor"),void 0==e.picFile&&(e.picFile={});var t={"background-color":e.bgColor,display:"block"},o={"background-image":"-webkit-gradient(linear, left top, right top, color-stop(0%,"+e.colorStop1+"), color-stop(100%, "+e.colorStop2+")"},n={"background-image":"radial-gradient(ellipse farthest-corner at 50% 50% , "+e.colorStop1+" 0%, "+e.colorStop1+" 50%, "+e.colorStop2+" 95%)",height:"100%",margin:"0","background-repeat":"no-repeat","background-attachment":"fixed"},r={background:"url("+e.picFile+")  no-repeat left center","background-size":"cover",height:"100%",margin:"0","background-attachment":"fixed"},a={background:"url("+e.picFile+") repeat",margin:"0"};"plainColor"==e.bgOption?p.appliedStyle=t:"gradientColor"==e.bgOption?"Linear"==e.pattern?p.appliedStyle=o:p.appliedStyle=n:"bgImage"==e.bgOption&&("selectedBGImage"==e.imagePattern?p.appliedStyle=r:p.appliedStyle=a),$(document.body).css(p.appliedStyle)}function c(){1==is_search_page||2==is_search_page?(n.nc="ps",d(slug)):3==is_search_page?(n.nc="sugg-ps",d("")):l()}function l(){t.getCustomPage().then(function(e){if(null!==e){p.customPage=e;var t=u(p.customPage);return t.then(function(){$(m).fadeIn(2e3)}),p.customPage}})}function d(e){1==is_search_page?1==p.searchJsonData.show_deck&&(p.searchJsonData.suggestion&&(e=p.searchJsonData.suggestion),t.getSearchPageData(e,"deck").then(function(e){if(null!=e){p.customPage={},p.customPage={pageGroupId:"",id:"",pgIrlNam:"",internalName:"",pageStyl:{}},e.structure.commonly_searched=p.searchJsonData.commonly_searched,e.structure.suggestion_message=p.searchJsonData.suggestion_message,e.structure.banners=p.searchJsonData.banners,p.customPage.sectionDetails=[e.structure];var t=u(p.customPage);return t.then(function(){$(m).fadeIn(2e3)}),p.customPage}})):2==is_search_page?t.getSearchPageData(e,"now-new").then(function(e){if(null!=e){p.customPage={},p.customPage={pageGroupId:"",id:"",pgIrlNam:"",internalName:"",pageStyl:{}},e.sectionDetails=t.updateNewAtBBList(e.sectionDetails,p.searchJsonData),p.customPage.sectionDetails=e.sectionDetails;var o=u(p.customPage);return o.then(function(){$(m).fadeIn(2e3)}),p.customPage}}):3==is_search_page?t.getSearchPageData(e,"sugg_search").then(function(e){if(null!=e){p.customPage={},p.customPage={pageGroupId:"",id:"",pgIrlNam:"",internalName:"",pageStyl:{}},e.sectionDetails=t.updateSuggestionList(e.sectionDetails,p.searchJsonData.suggested_search),p.customPage.sectionDetails=e.sectionDetails;var o=u(p.customPage);return o.then(function(){$(m).fadeIn(2e3)}),p.customPage}}):3==is_search_page&&t.getSearchPageData(e,"sugg_search").then(function(e){if(null!=e){p.customPage={},p.customPage={pageGroupId:"",id:"",pgIrlNam:"",internalName:"",pageStyl:{}},e.sectionDetails=t.updateSuggestionList(e.sectionDetails,p.searchJsonData.suggested_search),p.customPage.sectionDetails=e.sectionDetails;var o=u(p.customPage);return o.then(function(){$(m).fadeIn(2e3)}),p.customPage}})}function u(t){var n=r.defer();return a(function(){var r=t.sectionDetails;p.setBackgroundColor(t.pageStyl);t.breakStyl;$(m).hide();var a={},i={};r=g(r);var s=1;angular.forEach(r,function(n,r){a=e.$new(),n.display_pos=s++,n.order=Number(n.order)+1,a.dsection=n,a.dsection.pagegroupid=t.pageGroupId,a.dsection.pageid=t.id,a.dsection.pgIrlNam=t.pgIrlNam,a.dsection.pageinternalName=t.internalName,a.dsection.pageStyle=t.pageStyl,i=o(n.layout.renderingDirective)(a),m.append(i)}),n.resolve("Complete")}),n.promise}var p=this;p.customPage={},p.appliedStyle={},p.setBackgroundColor=s,p.searchJsonData="{}",void 0!=SEARCH_JSON_DATA&&(p.searchJsonData=JSON.parse(SEARCH_JSON_DATA));var g=R.sortBy(R.prop("order")),m=$("#dynamicDirective");n.USED_STATIC_URL=USED_STATIC_URL,n.channel="desktop",n.nc="custompage"==ctype?"cp":"ct",i(),c()}angular.module("app.customPage").controller("CustomPage",e),e.$inject=["$scope","CustomPageDataService","$compile","$rootScope","$q","$timeout"]}(),function(){"use strict";function e(){var e={link:function(e,t,o){t.bind("error",function(){angular.element(this).attr("src",o.fallbackSrc)})}};return e}function t(e){function t(t,o,n){var r=e(t.sectionModel.info)(t),a=angular.element(o)[0].querySelector("section");angular.element(a).append(r)}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/information.html",link:t}}function o(e){function t(t,o,n){t.sectionData=t.sectionModel.section_data,t.pushToGoogleAnalytics=e.pushToGoogleAnalytics()}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/saving.html",link:t}}function n(e,t,o,n,r,a){function i(){S.selectedQuantity=void 0===k?0:k,S.selectedQuantityText=void 0===k?"":S.selectedQuantity+" in basket",k?S.check=!0:S.check=!1}function s(){t.ismember?t.$broadcast("Notify",S.selectedProduct.sku):window.location.href="/auth/login/?nc=nb"}function c(e){S.available=e}function l(e){return R.isEmpty(e)}function d(o){if(void 0!==o&&null!==o&&0!==Object.keys(o).length&&o.constructor!==Object){if(S.flashIsOff=!1,1==o.show_counter){var n=(new Date).getTime()/1e3;e.timeConverter(n),t.$on("TimeCheck",function(t,o){e.timeConverter(o.data)})}else S.flashMessage=S.selectedProduct.sale_info.display_message;return!0}return!1}function u(t){return e.baseurl+"/"+t.p_img_url}function p(e){return A.test(e.fi_type)}function g(e){var o=t.member_stores[e.availability_info_id];if(o){if("normal"==o.fi_type||"jit"==o.fi_type){o.eta}else if("marketplace"==o.fi_type)o.eta=" ";else{if(!t.is_express_availaible||"BB EXPRESS (SLOTS FULL)"===t.express_closed)return!1;o.eta}return o}return!1}function m(e){var o=t.member_stores[e.availability_info_id];return void 0!==o}function f(){S.selectedQuantity=n.getformatedcart()[S.selectedProduct.sku],S.selectedQuantityText=void 0===S.selectedQuantity?"":S.selectedQuantity+" in basket",S.startQuantity=void 0===S.selectedQuantity?1:S.selectedQuantity,S.selectedQuantity?S.check=!0:S.check=!1}function h(){if(S.selectedQuantity>1){var e=Number(S.selectedQuantity)-1;n.updateCartQuantity(S.selectedProduct.sku,e,S.sid).then(function(e){e&&(n.getCart().then(function(e){_(),S.selectedQuantity=n.getformatedcart()[S.selectedProduct.sku],S.startQuantity=S.selectedQuantity,S.selectedQuantityText=S.selectedQuantity+" in basket",S.selectedProduct.is_feature_selected=S.selectedQuantity,0===S.selectedQuantity&&(S.rmActivated(),S.startQuantity=1,S.selectedProduct.is_feature_selected=0)}),$(document).trigger("basketInteractionsPlowerWithAngular",[{EventName:"Basket_Decrement",SkuID:S.selectedProduct.sku,Quantity:1,UnitMrp:S.selectedProduct.mrp,UnitSalePrice:S.selectedProduct.sp,ScreenInPageContext:S.sectionModel.internalName,ScreenInPagePosition:Number(S.sectionModel.display_pos)}]),a.pushToGoogleAnalytics("_trackEvent","decr-quantity","custom-page",S.sectionModel.display_pos+" | "+S.sectionModel.pageinternalName+" | "+S.ga_section_name+" | "+S.sectionModel.internalName+" | "+S.selectedProduct.sku+" | "+S.selectedProduct.p_desc+" | "+S.itemposition,1))})}else 1===S.selectedQuantity&&n.deleteFromBasket(S.selectedProduct.sku,S.sid).then(function(e){e?(n.getCart().then(function(e){_(),S.selectedQuantity=0,S.startQuantity=1,S.check=!1,S.selectedProduct.is_feature_selected=0,r.success("","Successfully Removed "+S.selectedProduct.p_desc+"from basket ",{timeOut:400,positionClass:"toast-top-full-width",closeButton:!0,preventDuplicates:!0})}),$(document).trigger("basketInteractionsPlowerWithAngular",[{EventName:"Basket_Remove",SkuID:S.selectedProduct.sku,Quantity:S.selectedQuantity,UnitMrp:S.selectedProduct.mrp,UnitSalePrice:S.selectedProduct.sp,ScreenInPageContext:S.sectionModel.internalName,ScreenInPagePosition:Number(S.sectionModel.display_pos)}]),a.pushToGoogleAnalytics("_trackEvent","remove-from-cart","custom-page",S.sectionModel.display_pos+" | "+S.sectionModel.pageinternalName+" | "+S.ga_section_name+" | "+S.sectionModel.internalName+" | "+S.selectedProduct.sku+" | "+S.selectedProduct.p_desc+" | "+S.itemposition,1)):r.error("Could not remove product ","Remove From Basket")})}function _(){t.$broadcast("getCart",S.selectedProduct)}function v(){var e=Number(S.selectedQuantity)+1;n.updateCartQuantity(S.selectedProduct.sku,e,S.sid).then(function(e){e&&(n.getCart().then(function(e){_(),S.selectedQuantity=n.getformatedcart()[S.selectedProduct.sku],S.startQuantity=S.selectedQuantity,S.selectedQuantityText=S.selectedQuantity+" in basket"}),$(document).trigger("basketInteractionsPlowerWithAngular",[{EventName:"Basket_Increment",SkuID:S.selectedProduct.sku,Quantity:1,UnitMrp:S.selectedProduct.mrp,UnitSalePrice:S.selectedProduct.sp,ScreenInPageContext:S.sectionModel.internalName,ScreenInPagePosition:Number(S.sectionModel.display_pos)}]),a.pushToGoogleAnalytics("_trackEvent","incr-quantity","custom-page",S.sectionModel.display_pos+" | "+S.sectionModel.pageinternalName+" | "+S.ga_section_name+" | "+S.sectionModel.internalName+" | "+S.selectedProduct.sku+" | "+S.selectedProduct.p_desc+" | "+S.itemposition,1))})}function b(t){S.startQuantity>0?n.updateCartQuantity(t.sku,S.startQuantity,S.sid).then(function(o){if(o.success)S.selectedQuantity=S.startQuantity,S.startQuantity=S.selectedQuantity,S.selectedQuantityText=S.startQuantity+" in basket",S.check=!0,S.selectedProduct.is_feature_selected=S.selectedQuantity,_(),$.cookie("_bb_ftvid")?($(".top-header").addClass("locpops"),$(".bb-brand-section").css("top","26px"),e.$emit("FirstTimeUser"),S.cityMessage=!0):($(".top-header").removeClass("locpops"),$(".bb-brand-section").css("top","0px"),S.cityMessage=!1,r.success("","Successfully added "+t.p_desc+" "+t.w+" to the basket",{timeOut:5e3,positionClass:"toast-top-full-width",closeButton:!0,preventDuplicates:!0,preventOpenDuplicates:!0})),S.check=!0,$(document).trigger("basketInteractionsPlowerWithAngular",[{EventName:"Basket_Add",SkuID:S.selectedProduct.sku,Quantity:S.selectedQuantity,UnitMrp:S.selectedProduct.mrp,UnitSalePrice:S.selectedProduct.sp,ScreenInPageContext:S.sectionModel.internalName,ScreenInPagePosition:Number(S.sectionModel.display_pos)}]),a.pushToGoogleAnalytics("_trackEvent","add-to-cart","custom-page",S.sectionModel.display_pos+" | "+S.sectionModel.pageinternalName+" | "+S.ga_section_name+" | "+S.sectionModel.internalName+" | "+S.selectedProduct.sku+" | "+S.selectedProduct.p_desc+" | "+S.itemposition,1),a.pushToGTM("add_to_basket_onclick",S.selectedProduct.sku,S.selectedQuantity,S.selectedProduct.sp);else{var i=n.getformatedcart();i[t.sku]?S.startQuantity=i[t.sku]:S.startQuantity=1}}):(r.error("Invalid Quantity","Add To Basket",{timeOut:5e3,positionClass:"toast-top-full-width",closeButton:!0,preventDuplicates:!0,preventOpenDuplicates:!0}),S.check=!1)}function y(o){S.selectedProduct=o,S.selectedProduct.slug_desc=C(S.selectedProduct),S.selectedProduct.available=!1,S.selectedProduct&&!S.selectedProduct.is_promo&&(S.selectedProduct.available=!1,S.selectedProduct.stdDiv=T("standard",t.member_stores,S.selectedProduct.store_availability),S.selectedProduct.expDiv=T("express",t.member_stores,S.selectedProduct.store_availability),P(S.selectedProduct.stdDiv,S.selectedProduct.expDiv)&&(S.selectedProduct.available=!0),null!==S.selectedProduct.stdDiv[2]&&S.selectedProduct.stdDiv[3]===!0&&null!==S.selectedProduct.expDiv[2]&&S.selectedProduct.expDiv[3]===!0&&(S.selectedProduct.showOneOOS=!0)),e.cartItem=n.getformatedcart(),e.cartItem&&e.cartItem[S.selectedProduct.sku]?(e.cartItem=n.getformatedcart(),k=e.cartItem[S.selectedProduct.sku]):k=S.selectedProduct.incart?S.selectedProduct.incart:null,i(),$(this).dropdown("toggle")}function w(e,t){n.getMultiSkuComboProducts(e).then(function(e){if(e){var n=e.data;S.sectionModel.products=n,S.sectionModel.products.length>1?S.sectionModel.comboTitle="Combos using "+t:S.sectionModel.comboTitle="Combo using "+t;var r=S.sectionModel.products.length>3,a=S.sectionModel.products.length<3?S.sectionModel.products.length:3;$("#comboModal_"+S.sectionModel.section_id).modal("show"),$("#comboModal_"+S.sectionModel.section_id+" .close").on("click",function(){$(".comboCarousel").trigger("destroy.owl.carousel")}),o(function(){$("#comboModal_"+S.sectionModel.section_id+" .comboCarousel").trigger("owl.stop");$("#comboModal_"+S.sectionModel.section_id+" .comboCarousel").owlCarousel({loop:!1,margin:10,nav:r,navText:[" "," "],responsive:{0:{items:a},600:{items:a},1e3:{items:a}}})},500),$(document).width()>767&&(1==S.sectionModel.products.length?$("#comboModal_"+S.sectionModel.section_id+" .modal-dialog").css("width","285px"):2==S.sectionModel.products.length?$("#comboModal_"+S.sectionModel.section_id+" .modal-dialog").css("width","520px"):$("#comboModal_"+S.sectionModel.section_id+" .modal-dialog").css("width","730px"))}})}var S=this,k=null,C=function(e){var t=[],o="";t.push(e.p_brand),t.push(e.p_desc),t.push(e.w);for(var n=function(e){if(e){var t=e.toLowerCase().trim();return t=t.replace(/[^a-z0-9\s-]/g," "),t=t.replace(/[\s-]+/g,"-")}},r=0;r<t.length;r++)o+=n(t[r])||"",r<t.length-1&&(o+="-");return o=n(o)},P=function(e,t){return e[3]===!1&&t[3]===!1||(null!==e[0]||null===e[2]||null!==t[0]||t[3]!==!0)&&(null===e[2]&&e[3]===!0||null===t[2]&&t[3]===!0)};S.OOSCheck=function(e){for(var o=0;o<e.length;o++){var n=T("standard",t.member_stores,e[o].store_availability),r=T("express",t.member_stores,e[o].store_availability);e[o].oos=!P(n,r)}};var T=function(e,t,o){for(var n=function(t){return t.tab_type===e&&"A"===t.pstat},r=function(t){return t.tab_type===e&&"O"===t.pstat},a=function(t){return t.tab_type===e},i=null,s=null,c=R.filter(n,o),l=R.filter(r,o),d=R.filter(a,o),u=0;u<c.length;u++)if(t[c[u].availability_info_id]){i=t[c[u].availability_info_id];break}for(var p=0;p<l.length;p++){var g=l[p].availability_info_id.replace(".OOSM","");if(t[g]){s=t[g];break}}var m=c.length>1;return[i,m,s,d.length>0]};S.selectedProduct=e.product,S.selectedProduct.slug_desc=C(S.selectedProduct),e.bigSave&&e.bigSave.show_discounted_price&&(S.selectedProduct.discounted_prices&&(S.selectedProduct.bigSaveEligible=e.bigSave.discounted_price_id_to_show in S.selectedProduct.discounted_prices,S.selectedProduct.bigSavePrice=S.selectedProduct.discounted_prices[e.bigSave.discounted_price_id_to_show]),angular.forEach(e.product.all_prods,function(t){t.discounted_prices&&(t.bigSaveEligible=e.bigSave.discounted_price_id_to_show in t.discounted_prices,t.bigSavePrice=t.discounted_prices[e.bigSave.discounted_price_id_to_show])}),S.bigSaveActiveInfo=e.bigSave.discounted_price_def[e.bigSave.discounted_price_id_to_show]),S.selectedProduct&&!S.selectedProduct.is_promo&&(S.selectedProduct.available=!1,S.selectedProduct.stdDiv=T("standard",t.member_stores,S.selectedProduct.store_availability),S.selectedProduct.expDiv=T("express",t.member_stores,S.selectedProduct.store_availability),P(S.selectedProduct.stdDiv,S.selectedProduct.expDiv)&&(S.selectedProduct.available=!0),null!==S.selectedProduct.stdDiv[2]&&S.selectedProduct.stdDiv[3]===!0&&null!==S.selectedProduct.expDiv[2]&&S.selectedProduct.expDiv[3]===!0&&(S.selectedProduct.showOneOOS=!0)),!e.feature&&S.selectedProduct&&(S.selectedProduct.incart||S.selectedProduct.no_items_in_cart)&&(k=S.selectedProduct.incart?S.selectedProduct.incart:S.selectedProduct.no_items_in_cart?S.selectedProduct.no_items_in_cart:null),S.itemposition=e.itmpos,S.sectionModel=e.sectionModel,S.ga_section_name="Default"==S.sectionModel.type?"BRPD":"CRPD",S.sid=e.sid,S.selectedQuantity=0,S.selectedQuantityText="",S.startQuantity=1,S.onProductChange=y,S.addToBasket=b,S.decreamentQuantity=h,S.increamentQuantity=v,S.broadcastEventNotify=s,S.imageUrl=u,S.showDeliveryDetails=g,S.typeOfIcon=p,S.showSlots=m,S.isPromoBlank=l,S.isFlashSaleBlank=d,S.flashIsOff=!0,S.flashMessage="",S.setAvailablity=c,S.check=void 0!==k,S.available=!1;var A=new RegExp("\\bexpress\\b");S.pushToGoogleAnalytics=a.pushToGoogleAnalytics,S.refreshcartQuantityforproduct=f,S.showMultiSkuComboProducts=w,i(),S.is_bb_brand=function(){var e=["fresho","bb royal","bb popular","fresho meat"];angular.forEach(e,function(e){S.selectedProduct.p_brand&&S.selectedProduct.p_brand.toLowerCase()===e&&(S.selectedProduct.bb_brand=!0)}),S.selectedProduct.mp_mrp="MRP: "},e.feature||S.is_bb_brand(),e.feature&&t.$on("getCart",function(e,t){t.is_feature_selected=t.is_feature_selected>0}),e.timeConverter=function(e){var t=S.selectedProduct.sale_info.end_time,o=1e3*(t-e),n=Math.floor(o%864e5/36e5),r=Math.floor(o%36e5/6e4),a="";n<=0?r<=0?o=0:a=r+"Min ":a=n+"Hrs "+r+"Min ",o<=0?S.flashMessage="":S.flashMessage="Ends in "+a},t.$on("CART_ITEM_CHANGED",function(e,t){S.selectedProduct.sku===t.sku&&(S.selectedQuantity=t.qty,S.startQuantity=0===S.selectedQuantity?1:t.qty,0==S.selectedQuantity?S.check=!1:S.check=!0,S.selectedQuantityText=S.selectedQuantity+" in basket")}),t.$on("PAGE_DATA_LOADED",function(){S.selectedProduct=e.product,S.selectedProduct.slug_desc=C(S.selectedProduct),S.selectedProduct&&!S.selectedProduct.is_promo&&(S.selectedProduct.available=!1,S.selectedProduct.stdDiv=T("standard",t.member_stores,S.selectedProduct.store_availability),S.selectedProduct.expDiv=T("express",t.member_stores,S.selectedProduct.store_availability),P(S.selectedProduct.stdDiv,S.selectedProduct.expDiv)&&(S.selectedProduct.available=!0),null!==S.selectedProduct.stdDiv[2]&&S.selectedProduct.stdDiv[3]===!0&&null!==S.selectedProduct.expDiv[2]&&S.selectedProduct.expDiv[3]===!0?S.selectedProduct.showOneOOS=!0:S.selectedProduct.showOneOOS=!1)})}function r(){return{restrict:"E",scope:{product:"=",baseurl:"@",sid:"@",cartItem:"=",sectionModel:"=",itmpos:"@",bigSave:"="},templateUrl:"app/templates/innertemplates/productTemplate.html",controller:["$scope","$rootScope","$timeout","UserDataservice","toastr","CustomPageDataService",n],controllerAs:"vm"}}function a(){return{restrict:"E",scope:{product:"=",baseurl:"@",sid:"@",cartItem:"=",sectionModel:"=",itmpos:"@",bigSave:"="},templateUrl:"app/templates/innertemplates/productTemplateInContainer.html",controller:["$scope","$rootScope","$timeout","UserDataservice","toastr","CustomPageDataService",n],controllerAs:"vm"}}function i(){return{restrict:"E",scope:{product:"=",baseurl:"@",sid:"@",cartItem:"=",sectionModel:"=",itmpos:"@",bigSave:"="},templateUrl:"app/templates/innertemplates/featuredProductTemplate.html",controller:["$scope","$rootScope","$timeout","UserDataservice","toastr","CustomPageDataService",n],controllerAs:"vm"}}function s(e,t,o){function n(e,t,o,n){function r(){E.filterCount=0,angular.forEach(E.filters,function(e,t){"tabbed"!=e.type&&angular.forEach(e.appliedFilters,function(e,t){E.filterCount+=1})})}function a(e){E.ignore_productdeck_call=!1,E.is_init=!1,E.selectedSort=e,E.execute=!1;var t=R.find(R.propEq("value",e))(E.sortOptions).display_name;o.pushToGoogleAnalytics("_trackEvent",E.nc_sort,"custom-page",t,1),c(),E.currentActiveTab.currentpage=1,location.hash="!page="+E.currentActiveTab.currentpage,angular.forEach(E.bootstrapTabs,function(e,t){e.currentpage=1}),E.justFiltered=!0,F()?E.endofPage=!0:E.endofPage=!1;var n={};n.o=E.selectedSort,n.sid="",n.sortCriteria=t,$(document).trigger("filterInteractionsPlower",[n])}function i(e){return"/pc/"+e+"/?nc=fa&sid="+E.sid}function s(e,t,n,r){var a=1==e.selected?"Apply":"Unapply";if(o.pushToGoogleAnalytics("_trackEvent",E.nc,"custom-page",t+"|"+e.display_name+"|"+a,1),E.is_init=!1,E.ignore_productdeck_call=!1,E.currentActiveTab.currentpage=1,E.justFiltered=!0,E.execute=!1,F()?E.endofPage=!0:E.endofPage=!1,location.hash="!page="+E.currentActiveTab.currentpage,angular.forEach(E.bootstrapTabs,function(e,t){e.currentpage=1}),e.selected){R.find(R.propEq("name",t))(E.filters)?("categories"==n&&(R.find(R.propEq("name",t))(E.filters).appliedFilters=[]),R.find(R.propEq("name",t))(E.filters).appliedFilters.push({name:e.display_name,facetFilter:e})):E.filters.push({name:t,type:"facet",slug:n,appliedFilters:[{name:e.display_name,facetFilter:e}]});var i={};i.apply=!0,i.filter="1",i.filter_type=t,i.referrerInPageContext=void 0===r?"":r;var s=e.display_name;i.label=s.replace(/<\/?span[^>]*>/g,""),$(document).trigger("filterInteractionsPlower",[i])}else if("categories"!=n){var c=R.findIndex(R.propEq("name",t))(E.filters),l=R.findIndex(R.propEq("name",e.display_name))(E.filters[c].appliedFilters);E.filters[c].appliedFilters.splice(l,1),d(E.filters[c].appliedFilters,c)}E.reapplyFilters()}function c(){E.currentActiveTab.showmore=!1,M.sid=E.sid;var e=[];E.filters.length>0&&angular.forEach(E.filters,function(t,o){var n=[];angular.forEach(t.appliedFilters,function(e,t){n.push(e.facetFilter.filter_value_slug)}),e.push({filter_slug:t.slug,values:n})}),E.promos_cached=[],M.filters=e,E.is_init||E.ignore_productdeck_call||(E.ignore_productdeck_call=!1,E.sectionModel.productwidgetuserslug?o.updateProductDeck(E.sectionModel.productsystemtype,M,E.selectedSort,E.sectionModel.productwidgetuserslug,E.currentActiveTab.tab_type,sid,E.base_sid,E.offer_sub_type).then(S):slug&&o.updateProductDeck(E.sectionModel.productsystemtype,M,E.selectedSort,slug,E.currentActiveTab.tab_type,sid,E.base_sid,E.offer_sub_type).then(S))}function l(e,t,n){E.is_init=!1,E.ignore_productdeck_call=!1,o.pushToGoogleAnalytics("_trackEvent",E.nc,"custom-page",n.name+"|"+n.appliedFilters[t].facetFilter.display_name+"|Unapply",1);var r={};r.apply=!1,r.filter="1",r.filter_type=n.name,r.label=n.appliedFilters[t].facetFilter.display_name,$(document).trigger("filterInteractionsPlower",[r]),"tabbed"!==n.type?n.appliedFilters[t].facetFilter.selected=!1:E.activeTab=1,n.appliedFilters.splice(t,1),d(n.appliedFilters,e),E.filters.length>0?E.reapplyFilters():E.clearAllFilters()}function d(e,t){0===e.length&&E.filters.splice(t,1)}function u(){E.activeTab=1,E.currentActiveTab=E.bootstrapTabs[0],E.is_init=!1,o.pushToGoogleAnalytics("_trackEvent",E.nc,"custom-page","Clear All",1),g(),$(document).trigger("clearAll"),E.justFiltered=!0,F()?E.endofPage=!0:E.endofPage=!1,E.reapplyFilters()}function p(){var e=null;E.justFiltered=!0,E.currentActiveTab.product_info&&F()?E.endofPage=!0:E.endofPage=!1,E.activeTab=1,E.filters.length>0&&angular.forEach(E.filters,function(t,o){"tabbed"==t.type&&(e=o)}),null!=e&&E.filters.splice(e,1),c()}function g(){var e=R.filter(D,E.filters);angular.forEach(e,function(e,t){angular.forEach(e.appliedFilters,function(e,t){e.facetFilter.selected=!1})}),E.filters=[]}function m(e){if(E.currentActiveTab=e,e.product_info&&(E.numberOfProducts=e.product_info.p_count),e.header_section&&(E.header_section=e.header_section),E.ignore_productdeck_call=!1,e.customfacets?(E.facetFilters=e.customfacets.facets,f(E.facetFilters,R.findIndex(R.propEq("filter_name","Category"))(E.facetFilters),0),C(e)):e.filter_opts&&(E.facetFilters=e.filter_opts,f(E.facetFilters,R.findIndex(R.propEq("filter_name","Category"))(E.facetFilters),0),C(e)),"all"!==e.tab_type){E.is_init=!1;var t=null;E.filters.length>0&&angular.forEach(E.filters,function(e,o){"tabbed"==e.type&&(t=o)}),null!=t&&E.filters.splice(t,1),void 0===R.find(R.propEq("name",e.tab_name))(E.filters)&&(E.filters.push({name:e.tab_name,type:"tabbed",slug:e.tab_type,appliedFilters:[{name:"Yes",facetFilter:E.facetFilters}]}),$(document).trigger("filterInteractionsPlower",{filter_type:e.tab_name,apply:!0})),E.execute=!1,c()}else"all"===e.tab_type&&(p(),E.is_init===!1&&$(document).trigger("filterInteractionsPlower",{filter_type:e.tab_name,apply:!0}))}function f(e,t,o){if(t>0){var n=e.splice(t,1);e.unshift(n[0])}}function h(e){return"standard"===R.toLower(e)?"All Products":e}function _(){if(E.slug="",slug?E.slug=slug:E.sectionModel.productwidgetuserslug&&(E.slug=E.sectionModel.productwidgetuserslug),E.sectionModel.ignoresectionupload&&"1"==E.sectionModel.ignoresectionupload){if(void 0!=E.sectionModel.productwidgetuserslug&&E.sectionModel.productwidgetuserslug.length>0)var e=[y(E.sectionModel.productsystemtype,E.sectionModel.productwidgetuserslug)];else if(slug)var e=[y(E.sectionModel.productsystemtype,slug)];else if("mem.sb"===E.sectionModel.productsystemtype)var e=[y(E.sectionModel.productsystemtype)];
}else var e=[w(E.sid)];return E.offer_sub_type&&"all-offers"!=E.offer_sub_type&&(E.is_offers_on_cat=!0),o.ready(e).then(function(){n(function(){$("#refine").click(function(){$("#offcanvas-refine").animate({bottom:"0"},0),$("#left-menu-overlay").fadeIn("slow")}),$("#close-refine, #apply-refine").click(function(){$("#offcanvas-refine").animate({bottom:"-100%"},0),$("#left-menu-overlay").fadeOut("slow")})})})}function v(){"ps"==E.sectionModel.productsystemtype&&(E.selectedSort="relevance",E.sortOrder="relevance")}function b(e){e.tab_info.length>0&&(t.sid=e.tab_info[0].sid,E.sid=e.tab_info[0].sid,E.filtered_sid=sid,L(e)),T(e),v(),E.execute=!0,$(window).scroll(function(){var e=$("#idToJump"+E.currentActiveTab.tab_type)[0],t=e.offsetTop,o=t+e.offsetHeight-$(window).height(),n=o-$(window).scrollTop();E.execute&&t+e.offsetHeight!=0&&n/(t+e.offsetHeight)*100<1&&(E.pagginator.loaded=!0,E.execute=!1,E.pagginator.paginate(2),$("#filterbar").trigger("sticky_kit:recalc"))})}function y(e,t){t||E.sectionModel.productwidgetuserslug.length>0&&(t=E.sectionModel.productwidgetuserslug),o.getSysGenProductDeck(e,t,E.sectionModel.productsystemtype,E.sectionModel.alloffersubtype).then(b)}function w(e){o.getProductDeck(e,null,E.offer_sub_type).then(T)}function S(e){var t=x(e.tab_info);E.quick_filterItems={},L(e),angular.forEach(E.bootstrapTabs,function(o,n){var r=R.findIndex(R.propEq("tab_name",o.tab_name))(e.tab_info);"Express"==o.tab_name&&"all"==o.tab_type&&(r=1),o.showmore=!1,o.currentpage=1,r<0?o.product_info&&(o.product_info.products=[]):(t[o.tab_type][0].customfacets?(o.filter_opts=t[o.tab_type][0].customfacets.facets,E.filtered_sid=t[o.tab_type][0].customfacets.sid):o.filter_opts=t[o.tab_type][0].filter_opts,o.filtered_on=t[o.tab_type][0].filtered_on,o.product_info=t[o.tab_type][0].product_info)});var o=t[E.currentActiveTab.tab_type][0];E.sortOptions=t[E.currentActiveTab.tab_type][0].sort_opts,E.sortOrder=t[E.currentActiveTab.tab_type][0].sorted_on,t[E.currentActiveTab.tab_type][0].customfacets?E.facetFilters=o.customfacets.facets:E.facetFilters=o.filter_opts,f(E.facetFilters,R.findIndex(R.propEq("filter_name","Category"))(E.facetFilters),0),O(o,o.reverse_merge),E.numberOfProducts=o.product_info.p_count,E.screen_name=e.screen_name,E.currentActiveTab.product_info.products=o.product_info.products,"mem.sb"===E.sectionModel.productsystemtype&&(E.short_list=o.product_info.short_list,E.long_list=o.product_info.long_list,E.reco_list=o.product_info.reco_list,1==E.currentActiveTab.show_reco_only?(P(E.reco_list.products),E.sb_list=[E.reco_list]):(P(E.short_list.products),P(E.long_list.products),E.sb_list=[E.short_list,E.long_list])),E.currentActiveTab.active=!0,setTimeout(function(){E.execute=!0},2e3),E.getfilterCount(),C(o)}function k(e,t){var o=!1;0==E.filters.length&&e.filtered_on.length>0&&(o=!0,"all"!==e.tab_type&&void 0===R.find(R.propEq("name",e.tab_name))(E.filters)&&E.filters.push({name:e.tab_name,type:"tabbed",slug:e.tab_type,appliedFilters:[{name:"Yes",facetFilter:t}]}));var n=e.filtered_on;angular.forEach(n,function(e,n){angular.forEach(t,function(t,n){e.filter_slug===t.filter_slug&&angular.forEach(e.values,function(e,n){angular.forEach(t.values,function(n,r){e===n.filter_value_slug&&(n.selected=!0,1==o&&(R.find(R.propEq("name",t.filter_name))(E.filters)?("categories"==t.filter_slug&&(R.find(R.propEq("name",t.filter_name))(E.filters).appliedFilters=[]),R.find(R.propEq("name",t.filter_name))(E.filters).appliedFilters.push({name:n.display_name,facetFilter:n})):E.filters.push({name:t.filter_name,type:"facet",slug:t.filter_slug,appliedFilters:[{name:n.display_name,facetFilter:n}]})))})})})}),E.getfilterCount()}function C(e){var t=e.filtered_on;angular.forEach(t,function(e,t){angular.forEach(E.facetFilters,function(t,o){e.filter_slug===t.filter_slug&&angular.forEach(e.values,function(e,o){angular.forEach(t.values,function(t,o){e===t.filter_value_slug&&(t.selected=!0)})})})})}function P(e){for(var t=0;t<e.length;t++){e[t].is_reco=!1,E.reco_list.id_list.indexOf(e[t].sku.toString())==-1&&1!=E.currentActiveTab.show_reco_only||(e[t].is_reco=!0);for(var o=0;o<e[t].all_prods.length;o++)if(e[t].all_prods[o].is_reco=!1,E.reco_list.id_list.indexOf(e[t].all_prods[o].sku.toString())!=-1||1==E.currentActiveTab.show_reco_only){e[t].all_prods[o].is_reco=!0;break}}}function T(e){E.bootstrapTabs=[],E.cart_info=e.cart_info,E.baseImageUrl=e.base_img_url,E.screen_name=e.screen_name,void 0!=e.base_sid&&(E.base_sid=e.base_sid,"all"==e.tab_to_show&&(sid=e.base_sid)),E.tab_info=x(e.tab_info);var t=1;angular.forEach(E.tab_info,function(o,n){E.currentActiveTab=o[0],E.facetFilters=o[0].customfacets.facets,O(o[0],o[0].reverse_merge),E.bootstrapTabs.push(o[0]),E.sortOptions=o[0].sort_opts,E.sortOrder=o[0].sorted_on,e.tab_to_show==o[0].tab_type&&(k(o[0],E.facetFilters),E.activeTab=t,$("#deck").show());var r=[];if(void 0!=E.currentActiveTab.product_info){var a=E.currentActiveTab.product_info.products.length;a>10&&(a=10);for(var i=0;i<a;i++)r.push(E.currentActiveTab.product_info.products[i].sku);window.dataLayer&&dataLayer.push({productlist1:r})}"mem.sb"===E.sectionModel.productsystemtype&&(E.short_list=E.currentActiveTab.product_info.short_list,E.long_list=E.currentActiveTab.product_info.long_list,E.reco_list=E.currentActiveTab.product_info.reco_list,1==E.currentActiveTab.show_reco_only?(P(E.reco_list.products),E.sb_list=[E.reco_list]):(P(E.short_list.products),P(E.long_list.products),E.sb_list=[E.short_list,E.long_list])),t+=1}),E.bootstrapTabs=I(E.bootstrapTabs)}function A(e,t,n,r,a){function i(n){"mem.sb"===E.sectionModel.productsystemtype&&(E.short_list.products&&(P(n.tab_info.product_map[e].short_list),E.short_list.products=R.concat(E.short_list.products,n.tab_info.product_map[e].short_list)),E.long_list.products&&(P(n.tab_info.product_map[e].long_list),E.long_list.products=R.concat(E.long_list.products,n.tab_info.product_map[e].long_list)),E.reco_list.products&&(P(n.tab_info.product_map[e].reco_list),E.reco_list.products=R.concat(E.reco_list.products,n.tab_info.product_map[e].reco_list))),E.tab_info[e][0].product_info.products?E.tab_info[e][0].product_info.products=R.concat(E.tab_info[e][0].product_info.products,n.tab_info.product_map[e].prods):E.tab_info[e][0].product_info.products=n.tab_info.product_map[e].prods,E.tab_info[e][0].promo_info?E.tab_info[e][0].promo_info.promos=n.tab_info.product_map[e].promos:E.tab_info[e][0].promo_info={promos:n.tab_info.product_map[e].promos},o.pushToGoogleAnalytics("_trackEvent",E.nc_paginate,"custom-page","pageview|scrolldown|page="+t,1),O(E.tab_info[e][0],E.tab_info[e][0].reverse_merge),E.numberOfProducts=E.tab_info[e][0].product_info.p_count,E.execute=!0;var r=$("#idToJump"+E.currentActiveTab.tab_type)[0],a=r.offsetTop,i=a+r.offsetHeight-$(window).height(),s=i-$(window).scrollTop();E.execute&&a+r.offsetHeight!=0&&s/(a+r.offsetHeight)*100<-25&&$("html, body").animate({scrollTop:$("#idToJump"+e).offset().top})}if(E.justFiltered=!1,E.sectionModel.productwidgetuserslug)if("mem.sb"==E.sectionModel.productsystemtype){var s=[],c=[],l=[];E.currentActiveTab.show_reco_only?l=E.reco_list.id_list.splice(0,20):(s=E.short_list.id_list.splice(0,20),s.length<20&&(c=E.long_list.id_list.splice(0,20-s.length))),o.getProductsForRestofTheTabs(E.sectionModel.productsystemtype,E.sid,e,t,r,E.selectedSort,a,E.sectionModel.productwidgetuserslug,E.offer_sub_type,s,c,l).then(i)}else o.getProductsForRestofTheTabs(E.sectionModel.productsystemtype,E.sid,e,t,r,E.selectedSort,a,E.sectionModel.productwidgetuserslug,E.offer_sub_type).then(i);else o.getProductsForRestofTheTabs(E.sectionModel.productsystemtype,E.sid,e,t,r,E.selectedSort,a,slug,E.offer_sub_type).then(i)}var E=this,M={sid:"",filters:[]};E.outofstockproduct="",E.sectionModel=e.sectionModel,e.Math=window.Math,E.dynamicBanners=[],E.sectionModel.banners&&(E.dynamicBanners=E.sectionModel.banners),E.tab_info={},E.bootstrapTabs=[],E.activeTab=1,E.screen_name="",E.header_section={},E.changeNameToAllProductsIfStandard=h,E.onClickingTabHeader=m,E.removeFilter=l,E.onFacetFilterChange=s,E.clearAllFilters=u,E.buildCategoryURL=i,E.sortOn=a,E.selectedSort="popularity",E.cart_info={},E.filters=[],E.facetFilters=[],E.brandSearch="",E.baseImageUrl="",E.numberOfProducts=0,E.sid=E.sectionModel.viewAllUrl,t.sid=E.sectionModel.viewAllUrl,E.filtered_sid=E.sectionModel.viewAllUrl,E.USED_STATIC_URL=USED_STATIC_URL,E.currentActiveTab={},E.sortOrder="popularity",E.reapplyFilters=c,E.ignore_productdeck_call=!1,E.is_init=!0,E.base_sid="",E.getfilterCount=r,E.filterCount=0,E.commonly_searched=e.sectionModel.commonly_searched?e.sectionModel.commonly_searched:{},E.suggestion_message=e.sectionModel.suggestion_message?e.sectionModel.suggestion_message:{},E.products_cached=[],E.promos_cached=[],E.is_offers_on_cat=!1,E.nc="custompage"==ctype?"cp-fa":"ct-fa",E.offer_sub_type=E.sectionModel.alloffersubtype,E.nc_paginate="custompage"==ctype?"cp":"ct",E.nc_sort="custompage"==ctype?"cp-sort":"ct-sort",E.justFiltered=!0,E.endofPage=!1,E.execute=!0,"undefined"!=typeof discount_data&&(E.bigSave=JSON.parse(discount_data));var x=R.groupBy(function(e){return e.tab_type}),I=R.sortBy(R.compose(R.toLower,R.prop("tab_type"))),D=(R.sortBy(R.compose(R.toLower,R.prop("filter_name"))),function(e){return"facet"===e.type});E.show_products=function(e){return e.product_info?e.product_info.products:[]};var O=function(e,t){var o=[],n=[];if(e.promo_info&&e.promo_info.promos){var r=function(e){return e.sku},a=function(e){return e.is_promo},i=R.filter(r,e.product_info.products),s=R.filter(a,e.product_info.products);o=R.concat(s,R.concat(e.promo_info.promos,E.promos_cached)),n=R.concat(i,E.products_cached);var c=U(n,o,"display_order",t);E.promos_cached=c.prom,E.products_cached=c.prod,console.log("final:",c),e.product_info.products=R.concat(c["final"],E.products_cached),E.products_cached=[],e.product_info.product_page==e.product_info.tot_pages&&(e.product_info.products=R.concat(e.product_info.products,E.promos_cached))}},U=function(e,t,o,n){function r(e,t,o){return e[o]<t[o]}function a(e,t,o){return e[o]>t[o]}var i=0,s=0,c=[],l=-1;n&&(l=1);var d=function(e,t){return(e[o]-t[o])*l};e=R.sort(d,R.uniqBy(R.prop("sku"),e)),t=R.sort(d,R.uniqBy(R.prop("promo_id"),t));var u=r;for(n&&(u=a);s<e.length&&i<t.length;)u(e[s],t[i],o)?(c.push(t[i]),t[i]=-1,i++):(c.push(e[s]),e[s]=-1,s++);var p=R.filter(function(e){return e!=-1},t),g=R.filter(function(e){return e!=-1},e);return c=R.concat(c,g),g=[],0==c.length&&p.length>0&&(c=p),{"final":c,prod:g,prom:p}},L=function(e){if(e.tab_info[0].header_section){var t=N(e.tab_info[0].header_section.items);delete t.undefined,E.quick_filterItems=t}};setTimeout(function(){$("#filterbar").stick_in_parent({parent:".sticky-parent",offset_top:60})},100);var N=R.groupBy(function(e){return e.filter_group}),F=function(){var e=E.currentActiveTab.currentpage>=E.currentActiveTab.product_info.tot_pages;return 1==e?E.endofPage=!0:E.endofPage=!1,e};E.pagginator={loaded:!1,loaderwidget:$("#pgloader"),tabcount:0,showmore:function(){return!!(E.currentActiveTab.product_info&&E.currentActiveTab.currentpage<E.currentActiveTab.product_info.tot_pages)||E.currentActiveTab.showmore},showmorepage:function(){location.hash="!page="+E.currentActiveTab.currentpage;var e=M.filters.length>0?M:null;A(E.currentActiveTab.tab_type,E.currentActiveTab.currentpage,E.currentActiveTab.tab_name,e,!0),$(".pd-loader").fadeIn(),setTimeout(function(){$(".pd-loader").fadeOut(),$("#filterbar").css("position","fixed")},1500)},paginate:function(t,o){if(E.currentActiveTab.showmore)E.currentActiveTab.product_info&&F()&&(E.currentActiveTab.showmore=!1);else if(E.pagginator.loaded){if(E.currentActiveTab.currentpage||(E.currentActiveTab.currentpage=1,location.hash="!page="+E.currentActiveTab.currentpage),E.currentActiveTab.product_info.tot_pages&&F())return E.currentActiveTab.showmore=!1,E.endofPage=!0,e.$apply(),!0;if(t>=0&&E.currentActiveTab.currentpage&&E.currentActiveTab.currentpage<E.currentActiveTab.product_info.tot_pages){var n=M.filters.length>0?M:null;if($(".pd-loader").fadeIn(),setTimeout(function(){$(".pd-loader").fadeOut(),$("#filterbar").css("position","fixed")},1500),E.currentActiveTab.currentpage?E.currentActiveTab.currentpage=E.currentActiveTab.currentpage+1:E.currentActiveTab.currentpage=2,E.currentActiveTab.currentpage<7){var r=R.findIndex(R.propEq("tab_name",E.currentActiveTab.tab_name))(E.bootstrapTabs);r&&(E.bootstrapTabs[r].currentpage=E.currentActiveTab.currentpage);var a=!0;$(document).trigger("snowscroll",[E.currentActiveTab.currentpage-1]),$(document).trigger("bannersOnScroll"),A(E.currentActiveTab.tab_type,E.currentActiveTab.currentpage,E.currentActiveTab.tab_name,n,a),location.hash="!page="+E.currentActiveTab.currentpage,e.$apply()}}}else E.pagginator.loaded=!0}},E.pagginator.loaderwidget.hide(),_()}return{restrict:"E",scope:{sectionModel:"="},controller:["$scope","$rootScope","CustomPageDataService","$timeout",n],controllerAs:"vm",templateUrl:"app/templates/innertemplates/productDeck.html"}}function c(e,t){function o(o,n,r){o.uid=_(),o.pushToGoogleAnalytics=t.pushToGoogleAnalytics,o.title=o.sectionModel.title,o.CategoryDetails=o.sectionModel.section_data.excel_data.CategoryDetails,o.BannerDetails=o.sectionModel.section_data.excel_data.BannerDetails,o.sectionId=o.sectionModel.section_id,o.pagegroupid=o.sectionModel.pagegroupid,o.viewAllUrl=o.sectionModel.viewAllUrl,o.viewAllUrlText=o.sectionModel.viewAllUrlText,o.pageid=o.sectionModel.pageid,o.MEDIA_URL=MEDIA_URL,o.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,o.status={},o.status.open=!1,o.useStaticImages=""===MEDIA_URL,e(function(){$("#"+o.uid).owlCarousel({autoplay:!0,autoplayTimeout:5e3,smartSpeed:600,autoplayHoverPause:!0,nav:!0,navText:[" "," "],items:1,lazyLoad:!0,loop:!0,responsiveClass:!0,responsive:{0:{items:1,loop:!0},600:{items:1,loop:!0},1e3:{items:1,loop:!0}}})}),o.style={},o.style.viewall=o.sectionModel.layout.viewAllStyle,o.style.headerStyle=o.sectionModel.pageStyle,o.style.categoryStyle=o.sectionModel.layout.style.CategoryStyle,o.style.categoryTitleStyle=o.sectionModel.layout.style.CategoryTitleStyle}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/combo.html",link:o}}function l(e){function t(t,o,n){t.sectionData=t.sectionModel.section_data.excel_data,t.title=t.sectionModel.title,t.uid=_(),t.pushToGoogleAnalytics=e.pushToGoogleAnalytics,t.sectionId=t.sectionModel.section_id,t.pagegroupid=t.sectionModel.pagegroupid,t.pageid=t.sectionModel.pageid,t.MEDIA_URL=MEDIA_URL,t.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,t.useStaticImages=""===MEDIA_URL,t.style={},t.style.headerStyle=t.sectionModel.pageStyle,t.style.block1={},t.style.block1.titleStyle=t.sectionModel.layout.style.blocks.block1.Title,t.style.block1.infoStyle=t.sectionModel.layout.style.blocks.block1.Info,t.style.block2={},t.style.block2.titleStyle=t.sectionModel.layout.style.blocks.block2.Title,t.style.block2.infoStyle=t.sectionModel.layout.style.blocks.block2.Info,t.style.block3={},t.style.block3.titleStyle=t.sectionModel.layout.style.blocks.block3.Title,t.style.block3.infoStyle=t.sectionModel.layout.style.blocks.block3.Info,t.style.block4={},t.style.block4.titleStyle=t.sectionModel.layout.style.blocks.block4.Title,t.style.block4.infoStyle=t.sectionModel.layout.style.blocks.block4.Info,t.style.block5={},t.style.block5.titleStyle=t.sectionModel.layout.style.blocks.block5.Title,t.style.block5.infoStyle=t.sectionModel.layout.style.blocks.block5.Info}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/nonLinear.html",link:t}}function d(e,t){function o(o,n,r){if(null==o.sectionModel.section_data)return!1;if("0"==o.sectionModel.ignoresectionupload)o.sectionData=o.sectionModel.section_data.excel_data;else if(o.sectionData=o.sectionModel.section_data,o.sectionData&&1==o.sectionData[0].show_random){var a=Math.floor(Math.random()*o.sectionData.length),i=R.splitAt(a,o.sectionData);o.sectionData=R.concat(i[1],i[0])}var s=function(){return o.sectionData[0].show_random&&1==o.sectionData[0].show_random?Math.floor(Math.random()*o.sectionData.length):0},c=o.sectionData.length>1;o.title=o.sectionModel.title,o.sectionId=o.sectionModel.section_id,o.pagegroupid=o.sectionModel.pagegroupid,o.pageid=o.sectionModel.pageid,o.MEDIA_URL=MEDIA_URL,o.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,o.useStaticImages=""===MEDIA_URL,o.uid=_(),o.pushToGoogleAnalytics=t.pushToGoogleAnalytics,e(function(){$("#"+o.uid).owlCarousel({autoplay:!0,autoplayTimeout:5e3,smartSpeed:600,autoplayHoverPause:!0,nav:!0,navText:[" "," "],items:1,lazyLoad:!0,mouseDrag:c,touchDrag:c,freeDrag:c,pullDrag:c,loop:c,responsiveClass:!0,responsive:{0:{items:1,loop:!0},600:{items:1,loop:!0},1e3:{items:1,loop:!0}},startPosition:s()})}),o.style={},o.style.BannerText=o.sectionModel.layout.style.BannerText,o.style.headerStyle=o.sectionModel.pageStyle}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/banners.html",link:o}}function u(e,t){function o(o,n,r){if(null==o.sectionModel.section_data)return!1;if("0"==o.sectionModel.ignoresectionupload)o.sectionData=o.sectionModel.section_data.excel_data;else if(o.sectionData=o.sectionModel.section_data,o.sectionData&&1==o.sectionData[0].show_random){var a=Math.floor(Math.random()*o.sectionData.length),i=R.splitAt(a,o.sectionData);o.sectionData=R.concat(i[1],i[0])}o.sectionData.length>1;o.title=o.sectionModel.title,o.sectionId=o.sectionModel.section_id,o.pagegroupid=o.sectionModel.pagegroupid,o.pageid=o.sectionModel.pageid,o.MEDIA_URL=MEDIA_URL,o.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,o.useStaticImages=""===MEDIA_URL,o.uid=_(),o.pushToGoogleAnalytics=t.pushToGoogleAnalytics,e(function(){var e=$(".fullWidth.outer-div .owl-carousel").owlCarousel({items:1,loop:!0,center:!0,navigation:!1,autoplayHoverPause:!0,autoplay:!0,autoplayTimeout:6e3,responsiveClass:!0,responsive:{991:{dotsContainer:"#carousel-custom-dots",dots:!0},0:{dots:!0,pagination:!1,navigation:!0}}});$("#carousel-custom-dots .owl-dot").click(function(){e.trigger("to.owl.carousel",[$(this).find("a").attr("id")])})}),o.style={},o.style.BannerText=o.sectionModel.layout.style.BannerText,o.style.headerStyle=o.sectionModel.pageStyle}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/bannerCaption.html",link:o}}function p(e,t){function o(o,n,r){o.sectionData=o.sectionModel.section_data.excel_data,o.uid=_(),o.pushToGoogleAnalytics=t.pushToGoogleAnalytics,o.sectionId=o.sectionModel.section_id,o.pagegroupid=o.sectionModel.pagegroupid,o.pageid=o.sectionModel.pageid,o.viewAllUrl=o.sectionModel.viewAllUrl,o.viewAllUrlText=o.sectionModel.viewAllUrlText,o.MEDIA_URL=MEDIA_URL,o.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,o.useStaticImages=""===MEDIA_URL,o.title=o.sectionModel.title,"Carousel"==o.sectionModel.type&&e(function(){$("#"+o.uid).owlCarousel({autoplay:!0,autoplayTimeout:9e3,autoplayHoverPause:!0,nav:!0,navText:[" "," "],items:4,slideBy:4,loop:!0,responsiveClass:!0,responsive:{0:{items:1,slideBy:1,loop:!0},480:{items:2,slideBy:2,loop:!0},600:{items:3,slideBy:3,loop:!0},1e3:{items:4,slideBy:4,loop:!0}}})}),o.style={},o.style.Title=b(o.sectionModel.layout.style.TitleStyle),o.style.CategoryStyle=b(o.sectionModel.layout.style.CategoryStyle),o.style.DiscountinfoStyle=o.sectionModel.layout.style.DiscountinfoStyle,o.style.viewall=o.sectionModel.layout.viewAllStyle,o.style.sectionViewAll=o.sectionModel.layout.style.SectionViewAllRenderingInfo,o.style.headerStyle=o.sectionModel.pageStyle}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/imageInfoViewAll.html",link:o}}function g(e,t){function o(o,n,r){if("0"==o.sectionModel.ignoresectionupload||void 0==o.sectionModel.ignoresectionupload)o.sectionData=o.sectionModel.section_data.excel_data;else if(o.sectionData=o.sectionModel.section_data,o.sectionData&&1==o.sectionData[0].show_random){var a=Math.floor(Math.random()*o.sectionData.length),i=R.splitAt(a,o.sectionData);o.sectionData=R.concat(i[1],i[0])}o.viewAllUrl=o.sectionModel.viewAllUrl,o.viewAllUrlText=o.sectionModel.viewAllUrlText,o.sectionId=o.sectionModel.section_id,o.pagegroupid=o.sectionModel.pagegroupid,o.pushToGoogleAnalytics=t.pushToGoogleAnalytics,o.pageid=o.sectionModel.pageid,o.MEDIA_URL=MEDIA_URL,o.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,o.useStaticImages=""===MEDIA_URL,o.uid=_(),o.title=o.sectionModel.title,"Carousel"==o.sectionModel.type&&e(function(){$("#"+o.uid).owlCarousel({autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!0,navText:[" "," "],items:4,slideBy:4,loop:!0,responsiveClass:!0,responsive:{0:{items:2,slideBy:2,loop:!0},600:{items:3,slideBy:3,loop:!0},1e3:{items:4,slideBy:4,loop:!0}}})}),o.style={},o.style.viewall=o.sectionModel.layout.viewAllStyle,o.style.Title=b(o.sectionModel.layout.style.Title),o.style.headerStyle=o.sectionModel.pageStyle}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/carouselWithTitle.html",link:o}}function m(e,t){function o(o,n,r){if("0"==o.sectionModel.ignoresectionupload||void 0==o.sectionModel.ignoresectionupload)o.sectionData=o.sectionModel.section_data.excel_data;else if(o.sectionData=o.sectionModel.section_data,o.sectionData&&1==o.sectionData[0].show_random){var a=Math.floor(Math.random()*o.sectionData.length),i=R.splitAt(a,o.sectionData);o.sectionData=R.concat(i[1],i[0])}o.sectionId=o.sectionModel.section_id,o.pagegroupid=o.sectionModel.pagegroupid,o.pageid=o.sectionModel.pageid,o.viewAllUrl=o.sectionModel.viewAllUrl,o.viewAllUrlText=o.sectionModel.viewAllUrlText,o.pushToGoogleAnalytics=t.pushToGoogleAnalytics,o.MEDIA_URL=MEDIA_URL,o.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,o.useStaticImages=""===MEDIA_URL,o.uid=_(),o.title=o.sectionModel.title,"Carousel"==o.sectionModel.type&&e(function(){$("#"+o.uid).owlCarousel({autoplay:!0,autoplayHoverPause:!0,nav:!0,navText:[" "," "],items:4,slideBy:4,lazyLoad:!0,loop:!0,responsiveClass:!0,responsive:{0:{items:2,slideBy:2,loop:!0},600:{items:3,slideBy:3,loop:!0},1e3:{items:4,slideBy:4,loop:!0}}})}),o.style={},o.style.viewall=o.sectionModel.layout.viewAllStyle,o.style.headerStyle=o.sectionModel.pageStyle}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/carouselOnlyImage.html",link:o}}function f(e,t,o,n){function r(t,r,a){t.sectionModel.section_data&&t.sectionModel.section_data.excel_data&&(t.sectionData=t.sectionModel.section_data.excel_data);t.cartitems=n.getformatedcart(),t.sectionId=t.sectionModel.section_id,t.pagegroupid=t.sectionModel.pagegroupid,t.pageid=t.sectionModel.pageid,t.viewAllUrl=t.sectionModel.viewAllUrl,t.viewAllUrlText=t.sectionModel.viewAllUrlText,t.pushToGoogleAnalytics=o.pushToGoogleAnalytics,t.MEDIA_URL=MEDIA_URL,t.base_img_url="",t.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,t.useStaticImages=""===MEDIA_URL,t.uid=_(),t.title=t.sectionModel.title,"undefined"!=typeof discount_data&&(t.bigSave=JSON.parse(discount_data)),t.sectionModel.productsystemtype?o.getProductsBySlug(t.sectionModel.productsystemtype,t.sectionModel.productwidgetuserslug,ctype,slug,tlc,t.sectionModel.alloffersubtype).then(function(o){var n=[];angular.forEach(o,function(e){n.push({product:e})}),t.sectionData=n,"Carousel"==t.sectionModel.type&&(t=y(t,e,{loop:!1,lazy:!1,items:8,slideBy:8}))}):o.getProductbyId(R.map(function(e){return e.PDID},t.sectionData)).then(function(o){var n=[];angular.forEach(o,function(e,r){var a=R.findIndex(R.propEq("PDID",String(e.sku)))(t.sectionData);a!=-1&&(t.sectionData[a].product=o[r],n.push(t.sectionData[a]))}),t.sectionData=n,"Carousel"==t.sectionModel.type&&(t=y(t,e,{loop:!1,lazy:!1,items:8,slideBy:8}))}),t.style={},t.style.viewall=t.sectionModel.layout.viewAllStyle,t.style.headerStyle=t.sectionModel.pageStyle}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/productwidgetmini.html",link:r}}function h(e,t,o){function n(n,r,a){n.sectionModel.section_data&&n.sectionModel.section_data.excel_data&&(n.sectionData=n.sectionModel.section_data.excel_data),n.cartitems=o.getformatedcart(),n.sectionId=n.sectionModel.section_id,n.pagegroupid=n.sectionModel.pagegroupid,n.pageid=n.sectionModel.pageid,n.viewAllUrl=n.sectionModel.viewAllUrl,n.viewAllUrlText=n.sectionModel.viewAllUrlText,n.pushToGoogleAnalytics=t.pushToGoogleAnalytics,n.MEDIA_URL=MEDIA_URL,n.base_img_url="",n.CUSTOM_STATIC_URL=CUSTOM_STATIC_URL,n.useStaticImages=""===MEDIA_URL,n.uid=_(),n.title=n.sectionModel.title,"undefined"!=typeof discount_data&&(n.bigSave=JSON.parse(discount_data)),n.sectionModel.productsystemtype?t.getProductsBySlug(n.sectionModel.productsystemtype,n.sectionModel.productwidgetuserslug,ctype,slug,tlc,n.sectionModel.alloffersubtype).then(function(t){var o=[];angular.forEach(t,function(e){o.push({product:e})}),n.sectionData=o,"Carousel"==n.sectionModel.type&&(n=y(n,e,{loop:!1,lazy:!1}))}):t.getProductbyId(R.map(function(e){return e.PDID},n.sectionData)).then(function(t){var o=[];angular.forEach(t,function(e,r){var a=R.findIndex(R.propEq("PDID",String(e.sku)))(n.sectionData);a!=-1&&(n.sectionData[a].product=t[r],o.push(n.sectionData[a]))}),n.sectionData=o,"Carousel"==n.sectionModel.type&&(n=y(n,e,{loop:!1,lazy:!1}))}),n.style={},n.style.viewall=n.sectionModel.layout.viewAllStyle,n.style.headerStyle=n.sectionModel.pageStyle}return{restrict:"E",scope:{sectionModel:"="},templateUrl:"app/templates/innertemplates/carouselproductwidgetlayout.html",link:n}}function _(){var e=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(e+=performance.now());var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)});return t}function v(e){function t(e){return"-"+e.toLowerCase()}return e.replace(/[A-Z]/g,t)}function b(e){var t={};return angular.forEach(e,function(e,o){t[v(o)]=e}),t}function y(e,t,o){return t(o.items&&o.slideBy?function(){$("#"+e.uid).owlCarousel({autoplay:!1,autoplayHoverPause:!1,nav:!0,navText:[" "," "],items:6,slideBy:6,lazyLoad:!1,loop:o.loop,responsiveClass:!0,responsive:{0:{items:2,slideBy:2,loop:o.loop},520:{items:2,margin:10,slideBy:2,loop:o.loop},768:{items:3,margin:10,slideBy:3,loop:o.loop},991:{items:4,slideBy:4,margin:10,mouseDrag:!1,loop:o.loop},1025:{items:6,slideBy:6,margin:10,mouseDrag:!1,loop:o.loop}}})}:function(){$("#"+e.uid).owlCarousel({autoplay:!1,autoplayHoverPause:!1,nav:!0,navText:[" "," "],items:5,slideBy:5,lazyLoad:!1,loop:o.loop,responsiveClass:!0,responsive:{0:{items:1,loop:o.loop},520:{items:2,margin:10,slideBy:2,loop:o.loop},768:{items:3,margin:10,slideBy:3,loop:o.loop},991:{items:4,slideBy:4,margin:10,mouseDrag:!1,loop:o.loop},1025:{items:5,slideBy:5,margin:10,mouseDrag:!1,loop:o.loop}}})}),e}t.$inject=["$compile"],angular.module("app.customPage").directive("carouselWithTitle",g).directive("carouselOnlyImage",m).directive("imageInfoViewAll",p).directive("banners",d).directive("bannerCaption",u).directive("nonLinear",l).directive("combo",c).directive("productDeck",s).directive("productTemplate",r).directive("information",t).directive("saving",o).directive("productWidgetMini",f).directive("productTemplateInContainer",a).directive("carouselProductWidget",h).directive("featuredProductTemplate",i).directive("fallbackSrc",e),o.$inject=["CustomPageDataService"],r.$inject=["$timeout"],s.$inject=["CustomPageDataService","$compile","$timeout"],c.$inject=["$timeout","CustomPageDataService"],l.$inject=["CustomPageDataService"],d.$inject=["$timeout","CustomPageDataService"],u.$inject=["$timeout","CustomPageDataService"],p.$inject=["$timeout","CustomPageDataService"],g.$inject=["$timeout","CustomPageDataService"],m.$inject=["$timeout","CustomPageDataService"],f.$inject=["$timeout","$rootScope","CustomPageDataService","UserDataservice"],h.$inject=["$timeout","CustomPageDataService","UserDataservice"]}(),function(){"use strict";function e(e,n,r){function a(t){function o(e){}e.post("/log/prodavialbility/",{toBeLoggedData:t}).then(o)}function i(t,o,n,r,a,i){function s(e){return e.data.products}var c="/custompage/pd/?type="+t+"&ctype="+n;return o&&(c=c+"&slug="+o),a&&(c=c+"&d_slug="+r+"&tlc="+a),r&&(c=c+"&d_slug="+r),i&&(c=c+"&offer_type="+i),e.get(c).then(s)}function s(t,o,r,a){function i(e,t,o,n){return"sis"==r?e.data:e.data}var s="/custompage/sysgenpd/?type="+t+"&slug="+o;if(sid)var s=s+"&sid="+sid;return a&&(s=s+"&offer_sub_type="+a),"ps"==t?n.when(!0).then(function(){return w}):e.get(s).then(i)}function c(t){function o(e){return e.data.products}return e({method:"GET",url:"/custompage/pd/",params:{"id[]":t}}).then(o)}function l(){function t(e,t,o,n){return e.data}var o=null;if("true"===ADMIN_REQUEST&&"true"===LIVE_PREVIEW){var n=window.location.search.match(/(city=)(.*)/);n&&3===n.length&&(o="/admin/custompage/draftpreview?url="+customPageURL+"&ar=true&city="+n[2]+"&isB2B="+ISB2B)}else if("true"===ADMIN_REQUEST){var n=window.location.search.match(/(city=)(.*)/);n&&3===n.length&&(o="/admin/custompage/display?url="+customPageURL+"&ar=true&city="+n[2]+"&isB2B="+ISB2B)}else o="custompage"==ctype?"/"+ctype+"/display?url="+customPageURL+"&cai="+r.CURRENT_ADDRESS_ID+"&isB2B="+ISB2B:"True"==ADMIN_REQUEST?"/"+ctype+"/display?url="+customPageURL+"&pageid="+PAGEID+"&slug="+slug+"&cityid="+CITYID+"&ar=1&isB2B="+ISB2B:"/"+ctype+"/display?url="+customPageURL+"&slug="+slug+"&cai="+r.CURRENT_ADDRESS_ID+"&isB2B="+ISB2B;return e.get(o).then(t)}function d(t,o){function n(e,t,o,n){if(e.data)return w=e.data.json_data,e.data}var r=null;return r="/custompage/getsearchdata/?slug="+t+"&type="+o,e.get(r).then(n)}function u(t,o,n){function r(e,t,o,n){return e.data}var a="/product/get-products/?="+t;return o&&(a=a+"&sorted_on="+o),n&&(a=a+"&offer_sub_type="+n),e.get(a).then(r)}function p(t,o,n,r,a,i,s,c,l,d,u,p){function g(e,t,o,n){return e.data}var m="";return m=a&&void 0==s?t?"/product/get-products/?slug="+c+"&filters="+JSON.stringify(a.filters)+"&sorted_on="+i+"&listtype="+t:"/product/get-products/?sid="+a.sid+"&filters="+JSON.stringify(a.filters)+"&sorted_on="+i:t?null!=a&&void 0!=a?"/product/get-products/?slug="+c+"&page="+r+'&tab_type=["'+n+'"]&filters='+JSON.stringify(a.filters)+"&sorted_on="+i+"&listtype="+t:"/product/get-products/?slug="+c+"&page="+r+'&tab_type=["'+n+'"]&sorted_on='+i+"&listtype="+t:null!=a&&void 0!=a?"/product/get-products/?sid="+o+"&page="+r+'&tab_type=["'+n+'"]&filters='+JSON.stringify(a.filters)+"&sorted_on="+i:"/product/get-products/?sid="+o+"&page="+r+'&tab_type=["'+n+'"]&sorted_on='+i,l&&(m=m+"&offer_sub_type="+l),"mem.sb"==t&&(d.length&&(m=m+"&sList="+d),u.length&&(m=m+"&lList="+u),p.length&&(m=m+"&rList="+p)),e.get(m).then(g)}function g(t,o,n,r,a,i,s,c){function l(e,o,n,r){return sid!=s&&(sid=s),$("html, body").animate({scrollTop:$(".custom-component.product-deck").offset().top-50},2e3),"sis"==t?($(".pd-overlay").fadeOut(),e.data):($(".pd-overlay").fadeOut(),e.data)}$(".pd-overlay").fadeIn();var d=null;if(d=t?"/product/get-products/?sid="+i+"&listtype="+t+"&filters="+JSON.stringify(o.filters)+"&sorted_on="+n+"&slug="+r+'&tab_type=["'+a+'"]':"/product/get-products/?sid="+o.sid+"&filters="+JSON.stringify(o.filters)+"&sorted_on="+n,c&&(d=d+"&offer_sub_type="+c),d)return e.get(d).then(l)}function m(){function e(){y=!0}return b?b:b=n.when(!0).then(e)}function f(e){var t=b||m();return t.then(function(){return n.all(e)})["catch"](function(e){})}function h(e,t,o,n,r){$(document).trigger("screenViewReferralsEvent",[{}]),"custompage"==ctype?o="cp | "+window.location.pathname:"customtemplates"==ctype&&(o="cptp | "+window.location.pathname),void 0!=window.ga&&S.push([e,t,o,n,r])}function _(e,t,o,n){dataLayer.push({event:"add_to_basket_onclick",product_id:t,price:n,quantity:o})}function v(e){return n.all(e).then(function(e){return!0})}var b,y=!1,w={},S={push:function(e){var t=e[0];if("_trackEvent"===t){var o=e[1],n=e[2],r=e[3],a=e[4];a?ga("send","event",o,n,r,a,{nonInteraction:1}):ga("send","event",o,n,r,{nonInteraction:1})}"_addTrans"===t&&(ga("ecommerce:addTransaction",{id:e[1],affiliation:"BigBasket.com",revenue:e[3],
shipping:e[5],tax:e[4]}),ga("ecommerce:send")),"_addItem"===t&&(ga("ecommerce:addItem",{id:e[1],name:e[3],sku:e[2],category:e[4],price:e[5],quantity:e[6]}),ga("ecommerce:send"))}},k={getCustomPage:l,getProductDeck:u,ready:f,updateProductDeck:g,getProductsForRestofTheTabs:p,pushToGoogleAnalytics:h,pushToGTM:_,getProductbyId:c,getRequestQueue:v,getProductsBySlug:i,getSysGenProductDeck:s,getSearchPageData:d,updateNewAtBBList:t,updateSuggestionList:o,logProductAvailablity:a};return k}function t(e,t){return e.forEach(function(e){if(e.section_data.excel_data=[],"now_at_bigbasket"==e.internalName&&1==t.show_now_at_bb){if(void 0!=t.now_at_bb.product_list)for(var o=0;o<t.now_at_bb.product_list.length;o++)e.section_data.excel_data.push({PDID:t.now_at_bb.product_list[o].toString()})}else if("new_at_bigbasket"==e.internalName&&1==t.show_new_at_bb&&void 0!=t.new_at_bb.product_list)for(var o=0;o<t.now_at_bb.product_list.length;o++)e.section_data.excel_data.push({PDID:t.new_at_bb.product_list[o].toString()})}),e}function o(e,t){var o=-1,n=!1;return e.forEach(function(e,r){void 0!=t[r]?(e.productsystemtype=t[r].slug_type,e.productwidgetuserslug=t[r].slug_value,e.viewAllUrl=t[r].view_all_url,e.title=t[r].title):0==n&&(o=r,n=!0)}),o>-1&&e.splice(o,5),e}angular.module("app.customPage").service("CustomPageDataService",e),e.$inject=["$http","$q","$window"]}(),function(){"use strict";function e(e,t,o){o(function(){var t=(new Date).getTime()/1e3;e.$emit("TimeCheck",{data:t})},5e3,0,!0)}angular.module("app.customPage").controller("TimeCalculator",e),e.$inject=["$scope","$rootScope","$interval"]}(),angular.module("app.layout").component("login",{templateUrl:"app/templates/innertemplates/login.html",bindings:{},controller:["$scope","$http","$window","loginAndSignupService","$timeout",function(e,t,o,n,r){var a=this,i=e.$parent,s=angular.element(document.querySelector(".signup-modal"));a.showForgotPasswordForm=!1,a.showLoginForm=!0,a.showLoginWithOTPForm=!1,a.togglePasswordDisplay=function(e){e.showHidePassword="view"==e.showHidePassword?"hide":"view",e.passwordDisplayType="password"==e.passwordDisplayType?"text":"password"},a.back=function(){a.showForgotPasswordForm=!1,a.showLoginForm=!0,a.showLoginWithOTPForm=!1,i.showNavTabs=!0},a.login={},a.login.emailID="",a.login.password="",a.login.passwordDisplayType="password",a.login.showHidePassword="view",a.login.loginErrorMessage="",a.login.showEmailError=!1,a.login.submit=function(e){if(e){a.login.emailError="";var t={username:a.login.emailID,password:a.login.password,Submit:"LOG IN",next:"/"};l(),n.submitForm(t,"/auth/login/",i).then(function(e){e.data.success?(i.redirect(),i.close()):(a.login.emailError=e.data.error,a.loginForm.$setPristine(),a.loginForm.$setUntouched(),u())})}else u()},a.loginInteraction=function(e){data=e.currentTarget.getAttribute("data-logininteraction"),$(document).trigger("loginInteractions",[data])},a.forgotPasswordLinkCLicked=function(e,t){if(t){a.loginInteraction(e),a.login.emailError="";var o={email_id:a.login.emailID};l(),n.submitForm(o,"/auth/member_check/",i).then(function(e){if(e.data.success){c();var t=o;n.getRequest("/auth/reset-password",t,i).then(function(e){0===e.data.success&&(a.otpResendMessage="OTP has been sent successfully",r(function(){a.otpResendMessage=""},3e3))})}else a.login.membershipError=e.data.error,a.loginForm.$setPristine(),a.loginForm.$setUntouched(),u()})}else a.login.showEmailError=!0,u()},a.forgotPassword={};var c=function(){a.showForgotPasswordForm=!0,a.showLoginForm=!1,i.showNavTabs=!1,a.forgotPassword.OTP="",a.forgotPassword.newPassword="",a.forgotPassword.confirmPassword="",a.forgotPassword.passwordDisplayType="password",a.forgotPassword.showHidePassword="view",a.forgotPassword.isPasswordValid=!1,a.forgotPassword.passwordMatch=!1,a.forgotPassword.otpError="",r(function(){a.forgotPasswordForm.$setUntouched(),a.forgotPasswordForm.$setPristine(),document.querySelector("#otp").focus()},0)};a.forgotPassword.checkPassword=function(e){a.forgotPassword.isPasswordValid=e>0};var l=function(){a.forgotPassword.successMessage="",a.login.emailError="",a.forgotPassword.otpError="",a.login.membershipError="",a.loginWithOTP.otpError=""};a.forgotPassword.validatePassword=function(e){a.forgotPassword.newPassword==a.forgotPassword.confirmPassword?a.forgotPassword.passwordMatch=!0:a.forgotPassword.passwordMatch=!1},a.resendOTP=function(){var e={email:a.login.emailID};l(),n.submitForm(e,"/auth/resend-otp/",i).then(function(e){a.otpResendMessage="OTP has been sent successfully",a.forgotPassword.OTP="",a.forgotPasswordForm.otp.$setUntouched(),a.forgotPasswordForm.$setPristine(),document.querySelector("#otp").focus(),r(function(){a.otpResendMessage=""},3e3)})},a.forgotPassword.submit=function(e,t){if(t&&a.forgotPassword.passwordMatch&&a.forgotPassword.isPasswordValid){var o={otp:a.forgotPassword.OTP,newpwd:a.forgotPassword.newPassword,secpwd:a.forgotPassword.confirmPassword,emailid:a.login.emailID};a.loginInteraction(e),l(),n.submitForm(o,"/auth/reset-password/",i).then(function(e){0!==e.data.success?(a.forgotPassword.otpError=e.data.message,a.forgotPasswordForm.$setUntouched(),a.forgotPasswordForm.$setPristine(),u()):(i.redirect(),i.close())})}else u()},a.socialLogin=function(e){"fb"==e&&n.fb_login("login"),"gplus"==e&&n.gplus_login("login")},a.loginWithOTPLinkClicked=function(e,t){if(t){a.loginInteraction(e),a.login.emailError="";var o={email_id:a.login.emailID};l(),n.submitForm(o,"/auth/member_check/",i).then(function(e){e.data.success?d():(a.login.membershipError=e.data.error,a.loginForm.$setPristine(),a.loginForm.$setUntouched(),u())})}else a.login.showEmailError=!0,u()},a.loginWithOTP={};var d=function(){a.loginWithOTP.sendOTP=function(){l();var e={email:a.login.emailID};n.getRequest("/auth/login/otp/",e,i).then(function(e){0===e.data.success&&(a.loginWithOTP.OTP="",a.loginWithOTPForm.$setUntouched(),a.loginWithOTPForm.$setPristine(),document.querySelector("#otp").focus(),a.otpResendMessage="OTP has been sent successfully",r(function(){a.otpResendMessage=""},3e3))})},a.showLoginWithOTPForm=!0,a.showLoginForm=!1,a.loginWithOTP.OTP="",a.loginWithOTP.otpError="",i.showNavTabs=!1,r(function(){a.loginWithOTPForm.$setUntouched(),a.loginWithOTPForm.$setPristine(),a.loginWithOTP.sendOTP()},0)};a.loginWithOTP.submit=function(e){if(e){var t={otp:a.loginWithOTP.OTP,email:a.login.emailID};l(),a.loginWithOTP.otpError="",n.submitForm(t,"/auth/login/otp/",i).then(function(e){e.data.success?(i.redirect(),i.close()):(a.loginWithOTP.otpError=e.data.message,a.loginWithOTPForm.$setUntouched(),a.loginWithOTPForm.$setPristine(),u())})}else u()};var u=function(){s.addClass("shake"),r(function(){s.removeClass("shake")},500)}}]}),angular.module("app.layout").controller("loginAndSignupBase",["$scope","$uibModalInstance","modalData","loginAndSignupService",function(e,t,o,n){var r=this;e.bbLoader=!1,e.goBack=!1,e.loadSignupCaptcha=!0,e.captcha_url="",e.captcha_0="",e.isB2B="True"==window.ISB2B,e.showNavTabs=!0;var a="undefined"!=typeof MEDIA_URL?MEDIA_URL:"",i={};e.dismiss=function(){$(document).trigger("ScreenViewLoginClose"),t.dismiss()},e.close=function(){t.dismiss()},r.tabs={login:!0,signup:!1},r.switchTab=function(e){Object.keys(r.tabs).forEach(function(e){r.tabs[e]=!1}),r.tabs[e]=!0,r.bannerUrl=i[e]?i[e].url:"",r.bannerId=i[e]?i[e].id:"",screenSlug=r.tabs.login?"/auth/login":"/auth/signup",$(document).trigger("trackLSBanners",[r.bannerId,screenSlug,o.pageContext])},e.redirect=function(){$(document).trigger("LoginRedirection"),location.href!=o.next?location.href=o.next:location.reload()},r.loginClicked=function(e){data=e.currentTarget.getAttribute("data-logininteraction"),$(document).trigger("loginInteractions",[data])},r.loginPageShown=function(e,t){var n="";void 0===t?(n=r.tabs.login?"/auth/login":"/auth/signup",$(document).trigger("LoginScreenView",[n,o.pageContext])):("signup"==t&&r.tabs.login||"login"==t&&r.tabs.signup)&&(r.loginClicked(e),n=r.tabs.login?"/auth/signup":"/auth/login",$(document).trigger("LoginScreenView",[n,o.pageContext]))};var s=function(){r.banners={},o.tab?r.switchTab(o.tab):r.switchTab("login"),n.getRequest("/auth/lsbanners/",{}).then(function(e){e.data.login_banner&&(r.loginBannerImgUrl=a+e.data.login_banner.img,i.login=e.data.login_banner),e.data.signup_banner&&(r.signupBannerImgUrl=a+e.data.signup_banner.img,i.signup=e.data.signup_banner),r.bannerUrl=i[o.tab]?i[o.tab].url:"",r.bannerId=i[o.tab]?i[o.tab].id:"",screenSlug=r.tabs.login?"/auth/login":"/auth/signup",$(document).trigger("trackLSBanners",[r.bannerId,screenSlug,o.pageContext])})};s()}]),angular.module("app.layout").component("passwordStrength",{templateUrl:"app/templates/innertemplates/password-strength.html",bindings:{password:"<",username:"<",onChange:"&"},controller:["$scope",function(e){var t=this;t.message="",t.messageClass="",t.barClass="",t.barHeight="1px";var o="";t.$onChanges=function(e){if(void 0!=e.password){var n=d(e.password.currentValue||"",t.username);t.message=d.messages[n.messageKey],t.messageClass="password-meter-message-"+n.messageKey,t.barClass="password-meter-"+n.messageKey,t.barHeight=0==n.rate?"1px":"2px",n.rate!==o&&(t.onChange({valid:n.rate}),o=n.rate)}};var n=/[a-z]/,r=/[A-Z]/,a=/[0-9]/,i=/[0-9].*[0-9]/,s=/[^a-zA-Z0-9]/,c=/^(.)\1+$/,l=function(e,t){return{rate:e,messageKey:t}},d=function(e,t){if(e.length<8)return l(0,"too-short");if(e.length>29)return l(0,"too-long");if(e.match(/\s{1,}/))return l(0,"spaces");if(t&&e.toLowerCase().match(t.toLowerCase()))return l(0,"similar-to-username");if(c.test(e))return l(2,"weak");if(e.match(/^[a-zA-Z]*$/)||e.match(/^(\d)\1*$/))return l(2,"weak");var o=n.test(e),d=r.test(e),u=a.test(e),p=(i.test(e),s.test(e));return e.length>12&&o&&d&&u&&p?l(4,"strong"):l(3,"good")};d.messages={"similar-to-username":"Too similar to username","too-short":"Min 8 Characters","very-weak":"Very weak",weak:"Weak",good:"Medium",strong:"Strong","too-long":"Password must be less than 30 characters",spaces:"Spaces are not allowed. Please try again"}}],controllerAs:"passwordCtrl"}),angular.module("app.layout").component("signup",{templateUrl:"app/templates/innertemplates/signup.html",controller:["$scope","$window","loginAndSignupService","$timeout",signupController],controllerAs:"signup"}),angular.module("app.layout").component("myOrder",{templateUrl:"app/templates/innertemplates/myOrder.html",bindings:{order:"<",index:"<",showDropdown:"<",toggleDropDown:"&"},controllerAs:"vm",controller:["$scope","$timeout",function(e,t){var o=this;o.voucher=!1;var n="",r={pay_now:"/payment/pay_now/",add_on_order:"",change_slot:"/member/self-service/change-delivery-slot/",cancel_order:"/member/self-service/cancel-order/",apply_voucher:"/co/forgot-voucher/"},a={pay_now:"PayNow_Clicked",add_on_order:"AddonOrder_Clicked",change_slot:"ChangeSlot_Clicked",cancel_order:"CancelOrder_Clicked",apply_voucher:"ApplyVoucher_Clicked"};o.$onInit=function(){o.active=0==o.order.order_state,o.isExpress=o.order.is_express,n=o.order.p_order_id,o.cancelledOrder=2==o.order.order_state,r.apply_voucher+=o.order.p_order_id+"/",o.showSavings=Number(o.order.order_details.total_savings)>0},o.closeAddonModal=function(){o.showAddOnModal=!o.showAddOnModal,$(document).trigger("AddonOrderClosed",[{}])},o.getSlotClass=function(){return o.cancelledOrder?"strike":""},o.getWidgetClass=function(){return o.active?"":"bg-dbdbdb"},o.actionClick=function(e,t){"add_on_order"==e.type?(o.showAddOnModal=!0,o.slotDate=new window.Date(o.order.slot_info.date)):window.location.href=r[e.type]+"?nc=oadtls_page",t&&($(document).trigger("selfServiceInteractionPlower",[{EventName:a[e.type],UserFlow:"oadtls_page",OrderId:t.order_id,OrderNumber:t.order_number,AdditionalInfo2:t.order_status},!0]),"add_on_order"==e.type&&$(document).trigger("AddonOrderScreenView",[{EventName:"FlatPages_Shown",ScreenType:"flat",ScreenURL:window.location.origin+"/order/slot_close_time_page/?nc=oadtls_page",ScreenSlug:"/order/slot_close_time_page/",PageTemplate:"default",AdditionalInfo2:t.order_status}]))}}]}),dataLayer=null,angular.module("app.layout").component("myOrderList",{templateUrl:"app/templates/innertemplates/myOrderList.html",bindings:{},controllerAs:"vm",controller:["$scope","$http","$timeout","$q",function(e,t,o,n){var r=this;r.page=1,r.totalPages=1,r.showViewMore=!1,r.activeOrders=[],r.pastOrders=[],r.currentExpandedOrder=void 0,r.activeOrderResponse=!1,r.pastOrderResponse=!1,r.$onInit=function(){t.get("/mapi/v3.5.0/order/order-assistant/?&page=1&type=active&&_bb_client_type=web").then(function(e){var t=e.data.response,o=t.total_active_orders;r.orderList=t.orders,r.activeOrders=r.orderList,r.activeOrderResponse=!0,r.triggerScreenView(),o>0&&(r.activeOrders[0].showDropdown=!0)}),t.get("/mapi/v3.5.0/order/order-assistant/?&page=1&type=past&&_bb_client_type=web").then(function(e){r.page++;var t=e.data.response;r.pastOrders=t.orders,r.totalPages=Number(t.total_pages),r.pastOrderResponse=!0,r.triggerScreenView(),r.totalPages>1&&(r.showViewMore=!0)})},r.triggerScreenView=function(){if(r.activeOrderResponse&&r.pastOrderResponse){var e="",t="";r.activeOrders&&r.activeOrders.length>0?(e=r.activeOrders[0].order_id,t=r.activeOrders[0].order_status,r.currentExpandedOrder=r.activeOrders[0]):r.pastOrders&&r.pastOrders.length>0&&(e=r.pastOrders[0].order_id,t=r.pastOrders[0].order_status,r.currentExpandedOrder=r.pastOrders[0]),screenViewValue=JSON.parse($($("[data-scrv]")[$("[data-scrv]").length-1]).val()),screenViewValue.ScreenTypeID=e,screenViewValue.AdditionalInfo2=t,screenViewValue.skipScreenView="false",$($("[data-scrv]")[$("[data-scrv]").length-1]).val(JSON.stringify(screenViewValue)),$(document).trigger("OADetailsShown",[{}]),r.activeOrders&&r.activeOrders.length>0&&$(document).trigger("selfServiceInteractionPlower",[{EventName:"OrderExpanded",UserFlow:"oadtls_page",OrderId:r.currentExpandedOrder.order_id,OrderNumber:r.currentExpandedOrder.order_number,AdditionalInfo2:r.currentExpandedOrder.order_status}])}},r.toggleDropDown=function(e){var t=e.showDropdown;r.activeOrders&&r.activeOrders.forEach(function(e){e.showDropdown=!1}),r.pastOrders&&r.pastOrders.forEach(function(e){e.showDropdown=!1}),e.showDropdown=!t,e.showDropdown&&(r.currentExpandedOrder=e,screenViewValue=JSON.parse($($("[data-scrv]")[$("[data-scrv]").length-1]).val()),screenViewValue.ScreenTypeID=e.order_id,$($("[data-scrv]")[$("[data-scrv]").length-1]).val(JSON.stringify(screenViewValue)),$(document).trigger("selfServiceInteractionPlower",[{EventName:"OrderExpanded",UserFlow:"oadtls_page",OrderId:r.currentExpandedOrder.order_id,OrderNumber:r.currentExpandedOrder.order_number,AdditionalInfo2:r.currentExpandedOrder.order_status}]))},r.viewmore=function(){t.get("/mapi/v3.5.0/order/order-assistant/?&page="+r.page+"&type=past&&_bb_client_type=web").then(function(e){r.page++;var t=e.data.response,o=t.orders;r.pastOrders=r.pastOrders.concat(o),r.totalPages<r.page&&(r.showViewMore=!1)})},r.helpClicked=function(){r.currentExpandedOrder?$(document).trigger("selfServiceInteractionPlower",[{EventName:"Help_Clicked",UserFlow:"oadtls_page",OrderId:r.currentExpandedOrder.order_id,OrderNumber:r.currentExpandedOrder.order_number,AdditionalInfo2:r.currentExpandedOrder.order_status},!0]):$(document).trigger("selfServiceInteractionPlower",[{EventName:"Help_Clicked",UserFlow:"oadtls_page",OrderId:-1,OrderNumber:"-1"},!0])}}]}),angular.module("app.layout").component("orderAssistant",{templateUrl:"app/templates/header/orderAssistant.html",bindings:{closeOrderAssistant:"&"},controllerAs:"vm",controller:["$scope","$http","$timeout","$window",function(e,t,o,n){var r=this;r.order={},r.hide=!0,r.cancelledOrder=!1,r.$onInit=function(){t.get("/mapi/v3.5.0/order/order-assistant/?_bb_client_type=web").then(function(e){var t=e.data.response;if(t&&t.orders){var a=t.orders.length,i=t.orders;a>0&&(r.hide=!1,r.order=i[t.display_index],r.noOfactiveOrders=t.total_active_orders,$(document).trigger("selfServiceInteractionPlower",[{EventName:"OaWidget_launched",UserFlow:"system",OrderId:r.order.order_id,OrderNumber:r.order.order_number,AdditionalInfo2:r.order.order_status}])),r.isExpress=r.order.is_express,r.cancelledOrder=2==r.order.order_state,o(function(){n.scrollBy(0,1)},200)}})},r.getSlotClass=function(){return r.cancelledOrder?"strike":"bold-dark"},r.oaWidgetClicked=function(){$(document).trigger("screenViewReferralsEvent",[{}]),$(document).trigger("selfServiceInteractionPlower",[{EventName:"OaWidget_Clicked",UserFlow:"User_action",OrderId:r.order.order_id,OrderNumber:r.order.order_number,AdditionalInfo2:r.order.order_status}])},r.oaWidgetClosed=function(){$(document).trigger("selfServiceInteractionPlower",[{EventName:"OaWidget_Closed",UserFlow:"User_action",OrderId:r.order.order_id,OrderNumber:r.order.order_number,AdditionalInfo2:r.order.order_status}])}}]}),angular.module("app.layout").component("orderStatusWidget",{templateUrl:"app/templates/header/orderStatusWidget.html",bindings:{arrowIndex:"<",states:"<",showArrow:"<"},controllerAs:"vm",controller:["$scope","$timeout",function(e,t){var o=this;o.statusMeter=0,o.$onChanges=function(){o.states.forEach(function(e,t){e.is_active&&(o.statusMeter=t)}),console.log(o.statusMeter)}}]}),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",o)}function o(e,t,o){return function(n,r){var a=t.config.appErrorPrefix||"",i={exception:n,cause:r};n.message=a+n.message,e(n,r),o.error(n.message,i)}}t.$inject=["$provide"],o.$inject=["$delegate","exceptionHandler","logger"],angular.module("blocks.exception").provider("exceptionHandler",e).config(t)}(),function(){"use strict";function e(e){function t(t){return function(o){e.error(t,o)}}var o={catcher:t};return o}e.$inject=["logger"],angular.module("blocks.exception").factory("exception",e)}(),function(){"use strict";function e(e,t){function o(o,n,r){t.error(o,r),e.error("Error: "+o,n)}function n(o,n,r){t.info(o,r),e.info("Info: "+o,n)}function r(o,n,r){t.success(o,r),e.info("Success: "+o,n)}function a(o,n,r){t.warning(o,r),e.warn("Warning: "+o,n)}var i={showToasts:!0,error:o,info:n,success:r,warning:a,log:e.log};return i}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(){this.config={},this.$get=function(){return{config:this.config}}}function t(e,t,o,n,r){function a(e){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},r.config.resolveAlways),g.when(e.url,e.config)}),g.otherwise({redirectTo:"/"})}function i(){t.$on("$routeChangeError",function(t,o,r,a){if(!d){u.errors++,d=!0;var i=o&&(o.title||o.name||o.loadedTemplateUrl)||"unknown target",s="Error routing to "+i+". "+(a.msg||"");n.warning(s,[o]),e.path("/")}})}function s(){i(),l()}function c(){for(var e in o.routes)if(o.routes.hasOwnProperty(e)){var t=o.routes[e],n=!!t.title;n&&p.push(t)}return p}function l(){t.$on("$routeChangeSuccess",function(e,o,n){u.changes++,d=!1;var a=r.config.docTitle+" "+(o.title||"");t.title=a})}var d=!1,u={errors:0,changes:0},p=[],g=r.config.$routeProvider,m={configureRoutes:a,getRoutes:c,routeCounts:u};return s(),m}angular.module("blocks.router").provider("routehelperConfig",e).factory("routehelper",t),t.$inject=["$location","$rootScope","$route","logger","routehelperConfig"]}(),function(){"use strict";function e(e,t){function o(){var t=[a()];e.ready(t).then(function(){})}function n(){u.categories=p(u.engagementStore.products),u.filters.category=""}function r(e){$("#engagementStoreFlatPage").hide(),$("#engagementStoreFlatPage").append(e),$("#engagementStoreFlatPage").show()}function a(){var t=function(t){u.engagement_stores=t.data,e.getEngagementStore(m).then(f)};e.getAllStores().then(t)}function i(e){u.grandTotal=0,u.totalSaved=0,angular.forEach(R.filter(g,e),function(e,t){u.grandTotal=u.grandTotal+e.product.selectedQuantity*e.product.sell_price,u.totalSaved=u.totalSaved+e.product.selectedQuantity*e.product.mrp})}function s(){angular.forEach(R.filter(g,u.engagementStore.products),function(e,t){e.product.selectedQuantity>0&&add_to_basket(e.pid,e.product.selectedQuantity,1,null,ADD_TO_CART_SOURCES.ENGAGEMENT_STORE,null)})}function c(){angular.forEach(R.filter(g,u.engagementStore.products),function(e,t){e.product.selectedQuantity<0&&(e.product.selectedQuantity=0),e.product.selectedQuantity>25&&(e.product.selectedQuantity=25)})}function l(e,o){angular.forEach(u.engagementStore.products,function(n,r){n.pid===Number(e)&&(n.cart.quantity=o,t.$digest())})}function d(){angular.forEach(u.engagementStore.products,function(e,o){void 0!==$("#p_"+e.pid)&&(0===$("#p_"+e.pid).length?e.cart.quantity=0:e.cart.quantity=$("#p_"+e.pid).val(),t.$digest())})}var u=this,p=R.groupBy(function(e){return e.category}),g=function(e){return e.product.select===!0};u.engagementStore={},u.categories={},u.filters={},u.numSelectedProducts=0,u.grandTotal=0,u.totalSaved=0,u.isItemAlreadyInCart=!1,u.addProductstoCart=s,u.selectStore=engagementStoreName,u.updateEngagementStore=l,u.updateEngagementStoreFromCart=d;var m=engagementStoreName,f=function(e){return u.filters={},u.engagementStore=e.data,n(),r(u.engagementStore.flatPage),t.$watch("vm.engagementStore.products",function(e,t){u.numSelectedProducts=R.filter(g,e).length,i(e),c()},!0),t.$watch("vm.engagementStore.store.numberOfGuests",function(e,t){e<2&&(u.engagementStore.store.numberOfGuests=2),angular.forEach(u.engagementStore.products,function(t,o){t.product.selectedQuantity=Math.round(t.fractionatedUnits*e)})},!0),R.isEmpty(u.engagementStore.promo)&&(u.engagementStore.promo=null),$("#engagementStoreMainContainer").fadeIn("slow"),HoldOn.close(),u.engagementStore};o()}angular.module("app").controller("EngagementStore",e),e.$inject=["engagementStore_dataService","$scope"]}(),function(){"use strict";function e(e,t){function o(t){function o(e,t,o,n){return e.data}return e({method:"GET",url:"/engagementStore?store="+t}).then(o)}function n(){function e(){c=!0}return s?s:s=t.when(!0).then(e)}function r(t){return e({method:"POST",url:"/basket/add/",data:$.param(t)})}function a(e){var o=s||n();return o.then(function(){return t.all(e)})}function i(){return e({method:"GET",url:"/engagementStore/engage/getStores/"})}var s,c=!1,l={ready:a,getEngagementStore:o,addtocart:r,getAllStores:i};return l}angular.module("app").factory("engagementStore_dataService",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,n){e.get_gift_card_data=function(){t.getGiftCardData().then(function(t){e.response=t,e.cat_msg=t.data.cat_msg,e.amount_msg=t.data.amount_msg,e.themes=t.data.themes,e.amts=t.data.amts,e.pm_list=t.data.pm_list,e.wal_balance=t.data.wal_balance,e.final_wal_balance=0,e.sub_total=0,e.final_total=0,e.wallet_sel=!1,e.selected_theme="",e.selected_image="",e.first_name="",e.email_id="",e.mobile_no="",e.gift_sender=t.data.user_name,e.selected_recipient="",e.selected_theme=e.themes[0].slug,e.selected_amt=e.amts[0],e.edit_card=!1,e.images=e.themes[0].images,e.show_drop=!1,e.is_member=$.cookie("_bb_mid"),null===window.localStorage.getItem("recipient_list")?e.recipient_list=[{first_name:"",email_id:"",mobile_no:""}]:e.recipient_list=angular.fromJson(localStorage.getItem("recipient_list")),null===window.localStorage.getItem("gift_msg")?e.gift_msg="":e.gift_msg=localStorage.getItem("gift_msg"),n(function(){$("#gift-carousel").owlCarousel({items:1,loop:!1,nav:!0,dots:!0,callbacks:!0,navText:["<i class='fa fa-chevron-left' aria-hidden='true'></i>","<i class='fa fa-chevron-right' aria-hidden='true'></i>"]})},0);for(var o=0;o<e.pm_list.length;o++)e.payment_methods=e.pm_list[o].options,e.sel_pm=e.pm_list[o].options[o].value;e.gift_card_google_analytics("create-gift-card-page","gift-card","/member/gift_cards/"),window.scope=e})},e.get_images=function(){console.log("images:"+e.images),console.log("slec theme:"+e.selected_theme);for(var t=0;t<e.themes.length;t++)e.themes[t].slug==e.selected_theme&&(e.images=e.themes[t].images)},e.save_recipient=function(t){var o=$(".recipients .recipient-details").length,r=$(".recipients .recipient-details").size()+1,a=5;r<=a?(e.recipient_list.push({first_name:e.first_name,email_id:e.email_id,mobile_no:e.mobile_no}),t&&(e.recipient_list.pop(),localStorage.setItem("recipient_list",angular.toJson(e.recipient_list)),localStorage.setItem("gift_msg",e.gift_msg))):($(".add_recipient_alert").fadeIn(),n(function(){$(".add_recipient_alert").fadeOut()},2e3)),e.first_name="",e.email_id="",e.mobile_no="",$("#gift-carousel").owlCarousel().trigger("destroy.owl.carousel"),n(function(){$("#gift-carousel").owlCarousel({items:1,dots:!0,nav:!0,navText:["<i class='fa fa-chevron-left' aria-hidden='true'></i>","<i class='fa fa-chevron-right' aria-hidden='true'></i>"]}),$("#gift-carousel").trigger("to.owl.carousel",o),$(".recipient-details").removeClass("active"),$(".recipient-details:last-child").addClass("active")},0)},e.go_to_slide=function(e){$("#gift-carousel").trigger("to.owl.carousel",e),$(".recipient-details").removeClass("active"),$(".recipient-details.count_"+e).addClass("active")},e.update_recipient_name=function(t,o){console.log("Preview name"+t),e.selected_recipient=t,$("#gift-carousel").trigger("to.owl.carousel",o)},e.remove_recipient=function(t){var o=$(".recipients .recipient-details").size()+1;$("#gift-carousel").owlCarousel().trigger("destroy.owl.carousel"),n(function(){$("#gift-carousel").owlCarousel({items:1,dots:!0,nav:!0,navText:["<i class='fa fa-chevron-left' aria-hidden='true'></i>","<i class='fa fa-chevron-right' aria-hidden='true'></i>"]}),$("#gift-carousel").trigger("to.owl.carousel",t-1),$(".recipient-details").removeClass("active"),$(".recipient-details:nth-last-child(2)").addClass("active")},100),o>2&&e.recipient_list.splice(t,1)},e.gift_card_google_analytics=function(e,t,n){void 0!=window.ga&&o.push(["_trackEvent",e,t,n])},e.editCard=function(){e.edit_card=!1,e.wallet_sel=!1,e.final_wal_balance=0,$("#collapseOne").collapse("show"),$("#collapseTwo").collapse("hide")},e.calc_total=function(){if(e.is_member)if(e.gift_card_google_analytics("clicked-proceed-to-payment","gift-card","/member/gift_cards/"),e.giftForm.$valid){var t=e.selected_amt*e.recipient_list.length;e.sub_total=t,e.final_total=e.sub_total,e.edit_card=!0,$("#collapseTwo").collapse("show"),$(this).fadeOut(),localStorage.removeItem("recipient_list"),localStorage.removeItem("gift_msg")}else console.log("Unable to save. Validation error!");else e.save_recipient(!0),window.openLoginModal()}}var t=angular.module("app.GiftCard");t.directive("allowOnlyNumbers",function(){return{restrict:"A",link:function(e,t,o,n){t.on("keydown",function(e){var t=$(this),o=t.val();return o=o.replace(/[^0-9]/g,""),t.val(o),64!=e.which&&16!=e.which&&(e.which>=48&&e.which<=57||(e.which>=96&&e.which<=105||([8,9,13,27,37,38,39,40].indexOf(e.which)>-1||(e.preventDefault(),!1))))})}}});var o={push:function(e){var t=e[0];if("_trackEvent"===t){var o=e[1],n=e[2],r=e[3],a=e[4];a?ga("send","event",o,n,r,a,{nonInteraction:1}):ga("send","event",o,n,r,{nonInteraction:1})}"_addTrans"===t&&(ga("ecommerce:addTransaction",{id:e[1],affiliation:"BigBasket.com",revenue:e[3],shipping:e[5],tax:e[4]}),ga("ecommerce:send")),"_addItem"===t&&(ga("ecommerce:addItem",{id:e[1],name:e[3],sku:e[2],category:e[4],price:e[5],quantity:e[6]}),ga("ecommerce:send"))}};t.controller("GiftCardController",e),e.$inject=["$scope","GiftCardService","$timeout"]}(),angular.module("app.GiftCard").service("GiftCardService",["$http","$q",function(e,t){function o(){return e.get("/co/gift-card-data/")}return{getGiftCardData:o}}]),function(){"use strict";function e(e){function t(e,t,n,r,a){$(document).trigger("screenViewReferralsEvent",[{}]),"custompage"==ctype?n="cp | "+n:"customtemplates"==ctype&&(n="cptp | "+n),void 0!=window.ga&&o.push([e,t,n,r,a])}var o={push:function(e){var t=e[0];if("_trackEvent"===t){var o=e[1],n=e[2],r=e[3],a=e[4];a?ga("send","event",o,n,r,a,{nonInteraction:1}):ga("send","event",o,n,r,{nonInteraction:1})}}},n={pushToGoogleAnalytics:t};return n}angular.module("app.layout").service("GAService",e),e.$inject=["$window"]}(),function(){function e(e){return("https:"==window.location.protocol?"/auth":"")+e}function t(t,n,r,a){function i(){return S.items?S.items.length:null}function s(){var e={};return angular.forEach(S.items,function(t){e[t.pid]=t.quantity}),e}function c(){function o(e){return S=e.data}return t.get(e("/basket/get/")).then(o)}function l(e,o,n){function i(e){var t=e.data.success;return t||r.error("",e.data.mesg,{timeOut:500,positionClass:"toast-top-full-width",closeButton:!0,preventDuplicates:!0,preventOpenDuplicates:!0}),e.data}var s={prod_id:e,qty:o,cart_type:1,is_list:[],term:$.query.get("q"),term_source:"/ps/"===location.pathname?"ps":"",sid:n,is_express_tab:!1,cartitem_mode:"normal"},c=new BasketUrlBuilder;return c=a.useNodeCart?c.withNodeCartUrl().build():c.build(),a.useNodeCart||(s=$.param(s)),t.post(c.updateQtyUrl,s).then(i)}function d(e,o,n,r){function i(e){var t=e.data.success;return t}var s={prod_id:e,qty:o,ru:"/ & spn = 0",cart_type:1,nc:"auto - search",term:r,term_source:"AUTO",sid:n,csrfmiddlewaretoken:$.cookie("csrftoken"),cartitem_mode:"normal"},c=new BasketUrlBuilder;return c=a.useNodeCart?c.withNodeCartUrl().build():c.build(),a.useNodeCart||(s=$.param(s)),t.post(c.addToCartUrl,s).then(i)}function u(e,o){"use strict";function n(e){return e.data}var r={sid:o,prod_id:e,cart_type:1,is_list:[]},i=new BasketUrlBuilder;return i=a.useNodeCart?i.withNodeCartUrl().build():i.build(),a.useNodeCart||(r=$.param(r)),t.post(i.delItemUrl,r).then(n)}function p(){function o(e){return k.memberinfo=e.data,k}return t.get(e("/get_member_details/")).then(o)}function g(o,n){function r(e){if(e.data.success)return e.data&&e.data.items&&!R.isEmpty(e.data.items)?e.data:null}var a={city_id:o,address_id:n};return t.post(e("/basket/get-cart-item-difference/"),$.param(a)).then(r)}function m(o,n){function r(e){return!!e.data.success}var a={city_id:o,address_id:n,csrfmiddlewaretoken:$.cookie("csrftoken")};return t.post(e("/set-city/"),$.param(a)).then(r)}function f(o){function n(e){if(e.data.success){var t={};return angular.forEach(e.data.adresses,function(e){var o=[{type:"Express Delivery",slot:e.express_closed_5k?"(Slots Full)":e.darkstore_next_slot,img:"custPage/build/content/img/bike_red.png",bb_star_avail:e.bb_star_avail},{type:"Standard Delivery",slot:e.express_closed_5k?e.darkstore_next_slot:e.normal_next_slot,img:"custPage/build/content/img/van_icon_green.png",bb_star_avail:e.bb_star_avail},{type:"Express Delivery",slot:e.express_next_slot,img:"custPage/build/content/img/bike_red.png",bb_star_avail:e.bb_star_avail}];o=R.filter(function(e){return!!e.slot&&""!=e.slot},o),o=o.length>0?o:null,o=R.forEach(function(e){"Standard Delivery"===e.type?e.type="Standard":e.slot=e.type+":"+e.slot},o),t[e.id]=o}),t}return null}var r={address_id:o,all:!0};return t.post(e("/member/get-address-slots/"),$.param(r)).then(n)}function h(){if(k&&k.memberinfo)return k.memberinfo}function _(o,n){function r(e){var t=e.data;return t}var a={product_id:n,notify_type:o,is_ct:!0,csrfmiddlewaretoken:$.cookie("csrftoken")};return t.post(e("/product/call-notify-popup/"),$.param(a)).then(r)}function v(o){function n(e){return e.data}return t.get(e("/product/get-multi-combo-products?is_cp=1&sku_id="+o)).then(n)}function b(){function e(){C=!0}return w?w:w=n.when(!0).then(e)}function y(e){var t=w||b();return t.then(function(){return n.all(e)})["catch"](function(e){})}var w,S={},k=new o(null),C=!1,P={getCart:c,getMember:p,updateBasket:d,deleteFromBasket:u,ready:y,getCartDifference:g,setdelivertoArea:m,sendStockNotification:_,getSlotsForAddress:f,updateCartQuantity:l,getmembername:h,getformatedcart:s,getCartLength:i,getMultiSkuComboProducts:v};return P}var o=function(){this.memberinfo=null,this.currentAddress=null};angular.module("app.layout").factory("UserDataservice",t),t.$inject=["$http","$q","toastr","$rootScope"]}(),function(){function e(e,t){var o=this;
o.footerData=[],$.cookie("_bb_vid")&&t.getfooter().then(function(e){o.footerData=e})}angular.module("app.layout").controller("Footer",e),e.$inject=["$scope","FooterDataservice"]}(),function(){function e(e,t){function o(){function o(e){"use strict";return e.data}var n=document.getElementById("city_id"),r="/auth/get_footer/?";return r+=n&&n.value?"city_id="+Number(n.value):"cai="+t.CURRENT_ADDRESS_ID,e.get(r).then(o)}function n(){function e(){i=!0}return a?a:a=$q.when(!0).then(e)}function r(e){var t=a||n();return t.then(function(){return $q.all(e)})["catch"]()}var a,i=!1,s={getfooter:o,ready:r};return s}angular.module("app.layout").factory("FooterDataservice",e),e.$inject=["$http","$window"]}(),function(){function e(e,t,o,n,r,a,i,s,c,l){function d(){var t=T.hideOnscroll;a.scrollY>2*a.innerHeight?T.hideOnscroll=!1:T.hideOnscroll=!0,t!=T.hideOnscroll&&e.$apply()}function u(e,t){$(".dropbtn").removeClass("dropdown-active"),$(document).trigger("addressInteractionPlower",[{EventName:"ChangeAddress_MessageDisplay"}]),window.show_cart_change_popup(e,t)}function p(e){T.deliveryaddress={address:e},n.getCartDifference(e.city_id,e.id).then(function(e){T.deliveryaddress.addresschangeqc=e,$(document).trigger("addressInteractionPlower",[{EventName:"ChangeAddress_MessageDisplay"}]),T.deliveryaddress.addresschangeqc||!T.newPopup?($(".dropdown-menu1, .overlay-dropdown").hide(),$(".dropbtn").removeClass("dropdown-active"),$("#uiv2-multicity-change").show(),$("#shoplist-mask").fadeIn()):($("body").removeClass("pos-fixed"),$(".dropdown-menu1").hide(),$(".dropbtn").removeClass("dropdown-active"),$(".top-header").removeClass("locpops"),$(".middle-header").css("top","0px"),$("#pageLoader").show(),$(".basket-loader").css("display","block"),T.setdeliveryArea())})}function g(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}function m(){"use strict";o.getPageInfo().then(function(o){T.member_done=!0,v(),t.member_stores=o.member_stores,t.$broadcast("PAGE_DATA_LOADED",{}),window.foo&&(foo.emit("PAGE_DATA_LOADED",o.member_stores),window.member_stores=o.member_stores),t.useNodeCart=o.USE_NODE_CART_SERVICE,T.current_city=o.current_city,T.selectedAddressDefault.city_id=T.current_city.id,T.selectedAddressDefault.city_name=T.current_city.name,o.site_message&&(T.siteMessageAvaiable(o.site_message),$("#site_msg_label").text(o.site_message),$("#site_msg").show()),T.address_city_name=void 0===o.selected_address?T.selectedAddressDefault.city_name:o.selected_address.city_name,T.address_city_id=void 0===o.selected_address?T.selectedAddressDefault.city_id:o.selected_address.city_id,T.user.currentAddress=void 0===o.selected_address?T.selectedAddressDefault:o.selected_address,T.user.currentAddress.residential_complex&&T.user.currentAddress.residential_complex.length>0&&(T.user.currentAddress.address_display_name=T.user.currentAddress.residential_complex+","+T.user.currentAddress.area),window.dataLayer&&dataLayer.push({city:T.address_city_name}),T.user.currentAddress.city_support_number=o.city_support_number,T.user.cart_no_items=a.CART,t.cart_no_items=T.user.cart_no_items,T.offerFlowEnabled=o.OFFERS_FLOW_ENABLED,$("#totalNumberOfCartItems").html(T.user.cart_no_items+" items"),$("#mobiletotalNumberOfCartItems").html(T.user.cart_no_items),T.user.is_member=o.is_member,o.selected_address?T.selectedlocation.cityquery=T.address_city_name:T.selectedlocation.cityquery="",t.has_speciality=o.has_speciality,T.all_cities=E(o.all_cities_choices),T.selectedlocation.city={name:T.address_city_name,value:T.address_city_id,id:T.address_city_id},T.kapture_chat=o.kapture_chat,T.cityselected=!0,T.selectedlocation.area="",T.headerBanner=o.header_banner,T.searchPlaceholder=o.search_label,T.show_my_membership_link=o.show_my_membership_link,T.show_priority_slot_msg=o.show_priority_slot_msg,T.is_active_bb_star_member=o.is_active_bb_star_member,T.giftingMsg=o.gifting_msg,1==loggedInUser&&(1==o.selected_address.is_partial&&t.cart_no_items>0?i(function(){T.cityMessage=!1,$(document).trigger("addressInteractionPlower",[{EventName:"Login_PartialAddressPopUp_Shown",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,AdditionalInfo2:$.cookie("_bb_locSrc")}]),T.locdropdown()},0):i(function(){T.cityMessage=!1,$.removeCookie("_bb_ftvid",{path:"/",domain:window.location.host.replace("www","")}),$.removeCookie("_bb_locSrc",{path:"/",domain:window.location.host.replace("www","")})},0)),$.cookie("_bb_mid")&&(T.cityMessage=!1,$.removeCookie("_bb_locSrc",{path:"/",domain:window.location.host.replace("www","")})),D(),T.hp_sections={},T.hp_sections.section1=o.hp_sec1_banner;var n=g("pg");null!=T.headerBanner&&(T.headerBanner["Image name"]=MEDIA_URL+T.headerBanner["Image name"]),null!=T.searchPlaceholder||void 0!=T.searchPlaceholder?T.searchPlaceholder=T.searchPlaceholder["Banner Text"].caption1:T.searchPlaceholder="Search for Products..",o.has_speciality&&(T.has_speciality=o.has_speciality),T.user.is_member&&(T.user.memberinfo=o.member_info,T.user.other_address=!1,t.ismember=!0,o.top_nav_addresses&&!R.isEmpty(o.top_nav_addresses)&&(T.user.other_address=o.top_nav_addresses),window.location.href.indexOf("choose-city/?pg=1&next=/")>-1&&1==n&&e.$$postDigest(function(){T.locationMWDropdown()}),window.dataLayer&&dataLayer.push({noo:T.user.memberinfo.noo,dolo:T.user.memberinfo.dolo,dofo:T.user.memberinfo.dofo}));var r=[{type:"Express",slot:o.express_closed_5k?"Express Delivery: (Slots Full)":o.darkstore_next_slot,img:USED_STATIC_URL+"img/express-del.svg"},{type:"Standard",slot:o.express_closed_5k?o.darkstore_next_slot:o.normal_next_slot,img:USED_STATIC_URL+"img/standard-del.svg"},{type:"Express",slot:o.express_next_slot,img:USED_STATIC_URL+"img/express-del.svg"}];if(r=R.filter(function(e){return!!e.slot&&e.slot.length>0},r),T.availaible_slots=r.length>0?r:null,angular.forEach(T.availaible_slots,function(e,t){T.availaible_slots[t].slot=T.format_slot(T.availaible_slots[t].slot)}),void 0===o.selected_address){$("#main_menu_icon").removeAttr("onclick"),$(".cart-image").removeAttr("href"),$(".mw-bb-logo").removeAttr("href"),$("#main_menu_icon, .user-mw-drop, .mw-bb-logo, .cart-image, .mask").click(function(){$(".dropdown-menu").effect("shake",{times:1},{distance:5},300)});var s=f();1==s&&T.locationMWDropdown()}T.user.is_member||window.location.href.indexOf("choose-city/?pg=1&next=/")>-1&&1==n&&e.$$postDigest(function(){T.locationMWDropdown()});for(var c=0;c<T.all_cities.length;c++)o=T.all_cities[c],o.label=T.all_cities[c].name,o.value=T.all_cities[c].name,o.id=T.all_cities[c].id,A.push(o)})}function f(){return function(e){if(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))return!0}(navigator.userAgent||navigator.vendor||window.opera),!1}function h(){T.user.is_member?n.sendStockNotification("B",T.outofstockproduct).then(function(e){e&&r.success("","You will be notified via Email, SMS/Push Notification when the product is available",{timeOut:5e3,positionClass:"toast-top-full-width",closeButton:!0,preventDuplicates:!0})}):window.location.href="/auth/login/?nc=nb"}function _(){"use strict";return{residential_complex:" ",isdummy:!0,nick:" ",first_name:" ",last_name:" ",is_partial:!1,pin:560001,area:" ",city_id:0,contact_area:"",contact_no:"",landmark:"",address_display_name:"M.G Road   ",city_name:"",address_1:"",address_2:"",lat:12.919697509246365,lng:77.57679894536898,nickname:"",id:"",is_express:!0}}function v(){"use strict";return o.getShops().then(function(e){T.shops=e.shops,T.express_shops=R.filter(function(e){return 1==e.is_express},T.shops),T.shops=R.filter(function(e){return 0==e.is_express},T.shops),T.offers=e.offers,T.express_shops.length>0&&(t.is_express_availaible=!0),e.express_closed?(t.is_express_availaible=!0,t.express_closed="BB EXPRESS (SLOTS FULL)"):t.is_express_availaible&&(t.express_closed="BB EXPRESS"),T.mainMenuEntryShop1=e.main_menu_banner1,null!=T.mainMenuEntryShop1&&(T.mainMenuEntryShop1["Image name"]=MEDIA_URL+T.mainMenuEntryShop1["Image name"])})}function b(){var e=[];e=void 0!=PAGE_TYPE&&"hpcp"===PAGE_TYPE?[m(),y()]:[m()],o.ready(e).then(function(){"use strict";$("#pageLoader").hide()}),T.VERSIONED_STATIC="True"==VERSIONED_STATIC,T.STATIC_URL=STATIC_URL,T.VERSION=VERSION,T.MEDIA_URL=MEDIA_URL,T.USE_NODE=USE_NODE,T.BBPLUS_ENABLED=!1,"undefined"!=typeof CUSTOMER_SELF_SERVICE_WEB_DISABLED&&(T.CUSTOMER_SELF_SERVICE_WEB_DISABLED=CUSTOMER_SELF_SERVICE_WEB_DISABLED),T.MEMBER_REFERAL_ACTIVE=!1,T.currenturl=window.location.pathname+window.location.search;var t=window.location.search.match(/next=(.*)/);t&&t.length>1?T.currenturl=encodeURIComponent(t[1]):T.currenturl="/",D()}function y(){"use strict";o.getLeftMenu().then(function(e){var t=e;T.leftmenu=t.topcats,T.viewAllBanner=t.viewallbanner,T.viewAllBanner&&(T.viewAllBanner=T.viewAllBanner[0]),T.showSubmenu(T.leftmenu[0]);var o=[];angular.forEach(T.leftmenu,function(e,t){o.push(C(e,t)),e.top_category.nav_banner&&(e.top_category.nav_banner.banners=e.top_category.nav_banner.banners[0],e.top_category.nav_banner.banners.image={background:"url('"+T.MEDIA_URL+e.top_category.nav_banner.banners.image+"')",height:"400px","background-repeat":"no-repeat","background-position":"right"})}),T.showSubmenu(T.leftmenu[0]),setTimeout(function(){$("#navBarMegaNav").menuAim({activate:w,deactivate:k,submenuDirection:"right"}),$("#navBarSticky").menuAim({activate:w,deactivate:k,submenuDirection:"right"})},3e3)})}function w(e){var t=$(e);M=e,O.scope().vm.menuHoverFixCallingshowSubmenu(t.data("l2"));var o=t.data("submenuId"),n=$("#"+o),r=$(t).parent().outerHeight();width=$(t).parent().outerWidth(),n.css({display:"block",top:-1,left:width-3,height:r-4}),t.find("a").addClass("active")}function S(e){var t=$(e),o=t.data("submenuId"),n=$("#"+o),r=$(t).parent().outerHeight();width=$(t).parent().outerWidth(),n.css({display:"block",top:-1,left:width-3,height:r-4}),t.find("a").addClass("active")}function k(e){var t=$(e),o=t.data("submenuId"),n=$("#"+o);n.css("display","none"),t.find("a").removeClass("active")}function C(e,t){"use strict";var o=P(e.sub_cats);e.subcategories=o,e.subcategories.chunks={chunk1:o[0]},o.length>1&&(e.subcategories.chunks.chunk2=o[1],o[1].length>9&&(e.subcategories.chunks.chunk2=o[1].splice(0,9),e.subcategories.chunks.showmore=!0))}function P(e){var t=[];if(e){angular.forEach(e,function(e){var o=[];angular.forEach(e,function(e){var t={name:e.sub_category[0],slug:e.sub_category[1],url:e.sub_category[2]};if(t.search_term=e.search_term,e.l2_banner){var n={};n.type=e.l2_banner.type,angular.forEach(e.l2_banner.banners,function(e){n[e.display_name]=e}),t.banner=n}t.options=null,e.cats&&e.cats.length>0&&(t.options=[],angular.forEach(e.cats,function(e){var o={name:e.cat[0],slug:e.cat[1],url:e.cat[2]};t.options.push(o)})),o.push(t)}),o&&t.push(o)})}return t}var T=this,A=[];"true"===$.cookie("_fls")&&(a.remove_cache=!0),"undefined"==typeof new_checkout&&(new_checkout=!1),"/basket/"==window.location.pathname&&new_checkout&&(T.newPopup=!0),$.cookie("_bb_ftvid")?T.cityMessage=!0:T.cityMessage=!1,T.firstTimeUser=!1,T.showError=!1,T.user={},T.cart={},T.showSearchContent=!1,T.searchfound=!1,T.showdrop=!1,T.cartupdate=!0,T.availaible_slots={},T.leftmenu={},T.shops={},T.offers={},T.AreaList=[],T.notifymethod="E",T.notifyMe=h,T.isB2BSite="True"===$("#IS_B2B_SITE").val(),T.selectedAddressDefault=_(),T.set_city_cart_check=p,T.newLoginFlow=window.NEW_LOGIN_FLOW,t.member_stores={},t.cart_no_items=0,t.ismember=!1,t.csrf=$.cookie("csrftoken");var E=R.sortBy(R.compose(R.toLower,R.prop("name")));T.selectedlocation={city:E[0],area:""};var M=[];T.readyToShow=!1,T.show_cart_change_popup=u,T.showOrderAssistant=!1,window.OA_WIDGET&&a.addEventListener("load",function(){T.showOrderAssistant="/"==window.location.pathname&&!("hide"==sessionStorage.getItem("orderAssistant")),d(),T.showOrderAssistant&&angular.element(a).bind("scroll",function(e){d()}),e.$apply()}),T.gotosubcategory=function(e){window.location.href=e.url},T.getNumberOfCartItems=function(){T.user.cart_no_items=n.getCartLength()?n.getCartLength():T.user.cart_no_items},T.siteMessageAvaiable=function(e){return T.siteMessage=e,$("#site_msg_label").text(e),$("#site_msg").show(),1},t.$on("Notify",function(e,t){"use strict";T.outofstockproduct=t,null!=$("div[id*='comboModal']")&&$("div[id*='comboModal']").modal("hide"),T.notifyMe()}),T.showDropdown=function(){T.showdrop=!0};var x=function(e){return R.is(Object,e)},I=function(e){e.qty=1},D=function(){"/gifting/"==window.location.pathname&&(T.currenturl="/gifting/",T.cityMessage=!0)};T.validate_cookie=function(){return void 0!=$.cookie("_bb_vid")||(window.location.href="/",!1)},T.searchProducts=function(){"use strict";function e(e){T.searchResults=e.results,T.searchResults.data=R.filter(x,T.searchResults.data),0===T.searchResults.data.length?T.searchfound=!1:(T.searchfound=!0,angular.forEach(T.searchResults.data,I),R.isEmpty(T.searchResults.suggestions.ads)&&(T.searchResults.suggestions.ads=!1),R.isNil(T.searchResults.suggestions.discounts)?T.searchResults.suggestions.discounts=!1:(T.searchResults.suggestions.discounts.pid=T.searchResults.suggestions.discounts.id,T.searchResults.suggestions.discounts.text=T.searchResults.suggestions.discounts.description,I(T.searchResults.suggestions.discounts))),T.showSearchContent=!0}var t=T.validate_cookie();t&&(T.searchPhrase.length>=3?(T.showSearchContent=!0,o.searchProducts(T.searchPhrase,T.current_city.id,"").then(e)):0===T.searchPhrase.length&&(T.showSearchContent=!1))},T.addProductsFromSearch=function(e){isNaN(e.qty)||e.qty<0?r.error("Invalid Quantity","Add To Basket",{timeOut:5e3,positionClass:"toast-top-full-width",closeButton:!0,preventDuplicates:!0,preventOpenDuplicates:!0}):n.updateBasket(e.pid,e.qty,"",T.searchPhrase).then(function(o){o&&(r.success("","Successfully added "+e.text+" to the basket",{timeOut:500,positionClass:"toast-top-full-width",closeButton:!0,preventDuplicates:!0}),t.$broadcast("getCart",T.selectedProduct),$(document).trigger("basketInteractionsPlowerWithAngular",[{EventName:"Basket_Add",SkuID:e.pid,Quantity:e.qty,UnitMrp:e.price,UnitSalePrice:e.price,ScreenInPageContext:"auto-search"}]))})},T.callBroadcastGetCart=function(){"use strict";t.$broadcast("getCart",{})},T.clearSearch=function(){T.searchResults=null,T.showSearchContent=!1},T.clearSearches=function(){T.searchResults=null,T.showSearchContent=!1,T.searchPhrase=""},T.canShowSearchSuggestions=function(){return!!(T.searchResults&&T.searchResults.suggestions&&(T.searchResults.suggestions.ads||T.searchResults.suggestions.terms.length>0||T.searchResults.suggestions.brands.length>0||T.searchResults.suggestions.categories.length>0))},T.userManualSearch=function(){T.searchPhrase&&T.searchPhrase.length>0&&($(document).trigger("screenViewReferralsEvent",[{}]),window.location.href="/ps/?q="+encodeURIComponent(T.searchPhrase))};var O=angular.element(document.getElementById("headerControllerId"));T.showL2Category=function(e){T.selectedl2=e},T.showSubmenu=function(e){T.selectedtop=e,T.selectedtop.subcategories&&T.showL2Category(T.selectedtop.subcategories.chunks.chunk1[0])},T.selectmenubanner=function(){window.location.href=T.selectedtop.top_category.nav_banner.banners.url},T.clearMenu=function(){T.viewall=!1,T.showSubmenu(T.leftmenu[0]),S([$("#navBarMegaNav li")[0]]),S([$("#navBarSticky li")[0]]),k(M)},T.menuHoverFixCallingshowSubmenu=function(t){"use strict";void 0!==t&&(T.showSubmenu(T.leftmenu[t]),e.$apply())},T.offcanvasToggle=function(e){var t=$("#offsubmenu"+e);t.find("ul").slideToggle(),t.find("i").toggleClass("fa-plus fa-minus")},T.changeLocation=function(){T.showdrop=!1},T.chooseCity=function(e){T.selectedlocation.city=e.id},T.skipandexplore=function(e){e?window.location.href="/skip_explore/?c="+e+"&l=0&s=0&n="+T.currenturl:(T.cityselected&&T.selectedlocation.cityquery&&0!==T.selectedlocation.cityquery.length||(T.selectedlocation.city={name:T.current_city.name,value:T.current_city.id,id:T.current_city.id}),T.selectedlocation.cityquery!==T.selectedlocation.city.name&&(T.selectedlocation.city=R.find(R.propEq("name",T.selectedlocation.cityquery))(T.all_cities)),$(document).trigger("addressInteractionPlower",[{EventName:"SkipExplore_Clicked",Location:T.selectedlocation.city.name,AdditionalInfo2:$.cookie("_bb_locSrc")}]),$.removeCookie("_bb_locSrc",{path:"/",domain:window.location.host.replace("www","")}),window.location.href="/skip_explore/?c="+T.selectedlocation.city.id+"&l=0&s=0&n="+T.currenturl)},T.continueClicked=function(){$(document).trigger("addressInteractionPlower",[{EventName:"ChangeMyLocation_ContinueClicked",Location:T.selectedlocation.cityquery+"|"+T.selectedlocation.area.label,AdditionalInfo2:$.cookie("_bb_locSrc")}]),$.removeCookie("_bb_locSrc",{path:"/",domain:window.location.host.replace("www","")}),s.pushToGoogleAnalytics("_trackEvent","city-select","change-city | Success",T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,1)},T.emptyCheck=function(){T.selectedlocation.query||(T.showError=!1)},T.getAreasForCity=function(e,t){return T.selectedlocation.query=e,T.selectedlocation.cityquery&&T.selectedlocation.cityquery.length>0&&T.selectedlocation.query&&R.find(R.propEq("name",T.selectedlocation.cityquery))(T.all_cities)?o.getAreasForCity(T.selectedlocation.city.id,T.selectedlocation.query,T.USE_NODE).then(function(e){return T.AreaList=e,0===e.length&&(T.areaselected=!1,T.showError=!0),t?void t(e):e.map(function(e){return e.display_name===e.pincode?e.label=e.display_name+" , "+T.selectedlocation.city.name:e.label=e.display_name+"-"+e.pincode+","+T.selectedlocation.city.name,e})}):(T.areaselected=!1,T.showError=!0,[])},T.isSkipnExplore=function(){return!(T.cityselected&&T.selectedlocation.cityquery&&T.areaselected&&T.selectedlocation.query)},T.onSelect=function(e){T.selectedlocation.city;T.selectedlocation.area=e,T.selectedlocation.submit=!0,T.areaselected=!0,T.showError=!1},T.onSelectCity=function(e){T.selectedlocation.city={id:e.id,name:e.name},T.selectedlocation.cityquery=T.selectedlocation.city.name,T.citychanged(),setTimeout(function(){$("#areaselect").focus()},100)},T.changeDeliveryAddress=function(e){$(document).trigger("addressInteractionPlower",[{EventName:"ChangeAddress_MessageDisplay"}]),$("#left-menu-overlay").hide(),T.showdrop=!1,T.deliveryaddress={address:e},n.getCartDifference(e.city_id,e.id).then(function(e){T.deliveryaddress.addresschangeqc=e})},T.setdeliveryArea=function(){T.newPopup&&($("#uiv2-multicity-change").hide(),$(".basket-loader").css("display","block"),$(".overlay-dropdown").css("display","block")),n.setdelivertoArea(T.deliveryaddress.address.city_id,T.deliveryaddress.address.id).then(function(e){if(e){var t=[];if(T.deliveryaddress.addresschangeqc)for(var o=0;o<T.deliveryaddress.addresschangeqc.items.length;o++)t.push(""+T.deliveryaddress.addresschangeqc.items[o].skuid);$(document).trigger("addressInteractionPlower",[{EventName:"ChangeAddress_Continue",ItemsRemoved:t}]),window.location.reload()}})},T.getslotsforaddress=function(e){var t=[];n.getSlotsForAddress(R.map(function(e){return e.id},e)).then(function(o){angular.forEach(e,function(e,n){if(o&&o[e.id]){e.availaibleslots=o[e.id],angular.forEach(e.availaibleslots,function(t,o){e.availaibleslots[o].slot=T.format_slot(e.availaibleslots[o].slot),1===t.bb_star_avail&&(e.bb_star_avail=1)});var r=e.availaibleslots;2==r.length&&1!=r[0].bb_star_avail&&1!=r[1].bb_star_avail?e.bb_star_avail=0:1==r.length&&1!=r[0].bb_star_avail&&(e.bb_star_avail=0),t.push(e)}}),T.user.other_address=t})},T.citychanged=function(){T.selectedlocation.query="",T.selectedlocation.submit=!1,T.cityselected=!0},T.format_slot=function(e){var t=e.match(/:(.*)/)[1];return t=t.replace("By",""),t=t.replace("Next",""),t=t.replace(/AM.*to/," -"),t=t.replace(/PM.*to/," -")},T.showuserdrop=function(){T.user.currentAddress.isdummy||($(".mask").show(),$(".dropbtn").removeClass("dropdown-active"),$(".user-btn").addClass("dropdown-active"),$(".mask").click(function(){$(this).fadeOut(),$("body").removeClass("pos-fixed"),$(".user-btn").removeClass("dropdown-active")}))},T.locationMWDropdown=function(){$("#city-select").val(T.user.currentAddress.city_name),T.selectedlocation.query="";var t=$(".dropbtn");$(".user-btn").removeClass("dropdown-active"),$(".dropbtn").addClass("dropdown-active"),$("body").addClass("pos-fixed"),$(".mask").fadeIn(),1==$("dropbtn.xhrcalls-only").hasClass("dropdown-active")&&T.user.is_member&&T.user.other_address&&T.getslotsforaddress(T.user.other_address),T.user.currentAddress.isdummy||$(".mask").click(function(){$(this).fadeOut(),$("body").removeClass("pos-fixed"),t.removeClass("dropdown-active")}),"function"==typeof jQuery("#area-select").autocomplete&&(jQuery("#area-select").autocomplete({source:function(e,t){T.getAreasForCity(T.selectedlocation.query,function(e){formatted=[];for(var o=0;o<e.length;o++)e[o].display_name===e[o].pincode?e[o].label=e[o].display_name+" , "+T.selectedlocation.city.name:e[o].label=e[o].display_name+"-"+e[o].pincode+","+T.selectedlocation.city.name,formatted.push(e[o]);t(formatted)})},select:function(t,o){var n=angular.element(document.getElementById("headercontroller"));n.scope().vm.onSelect(o.item),e.$digest()},minLength:3}),jQuery("#city-select").autocomplete({source:A,select:function(t,o){var n=angular.element(document.getElementById("headercontroller"));n.scope().vm.onSelectCity(o.item),e.$digest(),$("#area-select").focus(),T.user.currentAddress.isdummy&&T.skipandexplore(o.item.id)},minLength:0}).focus(function(){"use strict";$("#city-select").val(""),$("#city-select").autocomplete("search",$("#city-select").val()),T.selectedlocation.query=""}))},T.openAutoSearch=function(){$("#city-select").autocomplete("search","")},$(".mask").click(function(){$("#city-select").autocomplete("close")}),$(document).on("firstBasketAdd",function(){i(function(){T.firstTimeUser=!0,T.dont_send_changemylocation_event=!0,T.locationChangeDropdown(),$(document).trigger("addressInteractionPlower",[{EventName:"AddToCart_AddressPopUp_Shown",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,AdditionalInfo2:$.cookie("_bb_locSrc")}])},0)}),T.cancelFirstStaticPopup=function(){T.firstTimeUser=!1,$(".overlay-dropdown").fadeOut(),$("body").removeClass("pos-fixed"),$(".dropdown-menu1").hide(),$(".dropbtn").removeClass("dropdown-active"),$(".top-header").removeClass("locpops"),$(".middle-header").css("top","0px"),s.pushToGoogleAnalytics("_trackEvent","city-select","continue",T.user.currentAddress.city_name,1),$(document).trigger("addressInteractionPlower",[{EventName:"AddToCart_AddressPopUp_Continue_Clicked",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,AdditionalInfo2:$.cookie("_bb_locSrc")}])},T.locationChangeDropdown=function(t){T.cityMessage=!1,$.cookie("_bb_ftvid")&&$.removeCookie("_bb_ftvid",{path:"/",domain:window.location.host.replace("www","")}),t&&$.cookie("_bb_locSrc")&&$.removeCookie("_bb_locSrc",{path:"/",domain:window.location.host.replace("www","")}),$("#city-select").val(T.user.currentAddress.city_name),T.selectedlocation.query="";var o=$(".dropbtn");$(".user-btn").removeClass("dropdown-active"),$(".dropdown-menu1").show(),o.addClass("dropdown-active"),$(".overlay-dropdown").fadeIn(),$("body").addClass("pos-fixed"),1==$("button.dropbtn.xhrcalls-only").hasClass("dropdown-active")&&T.user.is_member&&T.user.other_address&&T.getslotsforaddress(T.user.other_address),T.user.currentAddress.isdummy||$(".overlay-dropdown").click(function(){$(this).fadeOut(),$("body").removeClass("pos-fixed"),$(".dropdown-menu1").hide(),o.removeClass("dropdown-active"),$(".top-header").removeClass("locpops"),$(".middle-header").css("top","0px"),T.showError=!1,s.pushToGoogleAnalytics("_trackEvent","city-select","continue",T.user.currentAddress.city_name,1)}),"function"==typeof jQuery("#area-select").autocomplete&&(jQuery("#area-select").autocomplete({source:function(e,t){T.getAreasForCity(T.selectedlocation.query,function(e){formatted=[];for(var o=0;o<e.length;o++)e[o].display_name===e[o].pincode?e[o].label=e[o].display_name+" , "+T.selectedlocation.city.name:e[o].label=e[o].display_name+"-"+e[o].pincode+","+T.selectedlocation.city.name,formatted.push(e[o]);t(formatted)})},select:function(t,o){var n=angular.element(document.getElementById("headercontroller"));n.scope().vm.onSelect(o.item),e.$digest()},minLength:3}),jQuery("#city-select").autocomplete({source:A,select:function(t,o){var n=angular.element(document.getElementById("headercontroller"));n.scope().vm.onSelectCity(o.item),e.$digest(),$("#area-select").focus()},minLength:0}).focus(function(){"use strict";$("#city-select").val(""),$("#city-select").autocomplete("search",$("#city-select").val()),T.selectedlocation.query=""})),$(".overlay-dropdown").click(function(){$("#city-select").autocomplete("close")}),T.dont_send_changemylocation_event||$(document).trigger("addressInteractionPlower",[{EventName:"ChangeMyLocation_Shown",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.address_display_name}]),T.dont_send_changemylocation_event=!1},T.cityMessageClose=function(){T.cityMessage=!1,$.removeCookie("_bb_ftvid",{path:"/",domain:window.location.host.replace("www","")})},t.$on("FirstTimeUser",function(){T.firstTimeUser=!0,T.dont_send_changemylocation_event=!0,T.locdropdown(),$(document).trigger("addressInteractionPlower",[{EventName:"AddToCart_AddressPopUp_Shown",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,AdditionalInfo2:$.cookie("_bb_locSrc")}])}),T.cancelFirstPopup=function(){T.firstTimeUser=!1,$("#city-drop-overlay").fadeToggle(),$("body").removeClass("toggle-scroll"),$(".new-to-bb").removeClass("drop-z-index"),$(".dropdown.new-to-bb").removeClass("open"),$(".top-header").removeClass("locpops"),$(".bb-brand-section").css("top","0px"),s.pushToGoogleAnalytics("_trackEvent","city-select","continue",T.user.currentAddress.city_name,1),T.user.is_member?T.user.currentAddress.is_partial&&$(document).trigger("addressInteractionPlower",[{EventName:"Login_PartialAddressPopUp_Continue_Clicked",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,AdditionalInfo2:$.cookie("_bb_locSrc")}]):$(document).trigger("addressInteractionPlower",[{EventName:"AddToCart_AddressPopUp_Continue_Clicked",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,AdditionalInfo2:$.cookie("_bb_locSrc")}])},T.changeFirstPopup=function(){T.firstTimeUser=!T.firstTimeUser,$(document).trigger("addressInteractionPlower",[{EventName:"AddToCart_AddressPopUp_ChangeCity_Clicked",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,AdditionalInfo2:$.cookie("_bb_locSrc")}])},T.locdropdown=function(e){T.cityMessage=!1,$.cookie("_bb_ftvid")&&$.removeCookie("_bb_ftvid",{path:"/",domain:window.location.host.replace("www","")}),e&&$.cookie("_bb_locSrc")&&$.removeCookie("_bb_locSrc",{path:"/",domain:window.location.host.replace("www","")}),$("#city-drop-overlay").fadeToggle(),$("body").toggleClass("toggle-scroll"),$(".new-to-bb").toggleClass("drop-z-index"),$(".dropdown.new-to-bb").toggleClass("open"),1==$(".dropdown.new-to-bb.xhrcalls-only").hasClass("open")&&T.user.is_member&&T.user.other_address&&T.getslotsforaddress(T.user.other_address),T.user.currentAddress.isdummy||$("#city-drop-overlay").click(function(){$("#city-drop-overlay").fadeOut("slow"),$("body").removeClass("toggle-scroll"),$(".new-to-bb").removeClass("drop-z-index"),$(".dropdown.new-to-bb").removeClass("open"),$(".top-header").removeClass("locpops"),$(".bb-brand-section").css("top","0px"),T.showError=!1,T.firstTimeUser=!1,s.pushToGoogleAnalytics("_trackEvent","city-select","continue",T.user.currentAddress.city_name,1)}),T.selectedlocation.cityquery=T.address_city_name,T.selectedlocation.city.name=T.address_city_name,T.selectedlocation.city.id=T.address_city_id,T.selectedlocation.query="",T.dont_send_changemylocation_event||(T.user.is_member&&T.user.currentAddress.is_partial?$(document).trigger("addressInteractionPlower",[{EventName:"Login_PartialAddressPopUp_Shown",Location:T.user.currentAddress.city_name+"|"+T.user.currentAddress.area,AdditionalInfo2:$.cookie("_bb_locSrc")}]):$(document).trigger("addressInteractionPlower",[{EventName:"ChangeMyLocation_Shown",Location:T.address_city_name+"|"+T.user.currentAddress.address_display_name}])),T.dont_send_changemylocation_event=!1},T.locdropclose=function(){$("#city-drop-overlay").fadeOut(),$("body").removeClass("toggle-scroll"),$(".new-to-bb").removeClass("drop-z-index"),$(".dropdown.new-to-bb").removeClass("open")},T.loginClicked=function(e){data=e.currentTarget.getAttribute("data-logininteraction"),$(document).trigger("loginInteractions",[data])},T.is_ie=function(){for(var e,t=3,o=document.createElement("div"),n=o.getElementsByTagName("i");o.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",n[0];);return t>4?t:e},T.openLoginAndSignupModal=function(t,o){T.is_ie()<10&&(window.location.href="/auth/"+t+"/?next="+o),o=location.href;var n=c.open({templateUrl:"app/templates/innertemplates/loginAndSignupBaseTemplate.html",scope:e,controller:"loginAndSignupBase",controllerAs:"loginAndSignupBase",windowClass:"signup-modal",resolve:{modalData:function(){return{tab:t,next:o||"/",pageContext:"nb"}}},backdrop:"static",keyboard:!1});n.result.then(function(e){},function(){})},window.openLoginModal=T.openLoginAndSignupModal,T.logout=function(){a.location.href="/auth/logout/?nc=md&page=custom",sessionStorage.clear()},T.closeOrderAssistant=function(){T.showOrderAssistant=!1,sessionStorage.setItem("orderAssistant","hide")},b()}angular.module("app.layout").controller("Header",e),e.$inject=["$scope","$rootScope","HeaderDataservice","UserDataservice","toastr","$window","$timeout","GAService","$uibModal","$cookies"]}(),function(){function e(e,t,o){function n(e){return("https:"==window.location.protocol?"/auth":"")+e}function r(t,o,n){"use strict";function r(e){return e.data}return e.get("/productservice/autocomplete/?term="+encodeURIComponent(t)+"&city_id="+o+"&_="+n).then(r)}function a(){function t(e){"use strict";return f=e.data.shops,f.express_closed=e.data.express_closed,
e.data}return o.remove_cache?e.get(n("/get_page_data/?cai="+o.CURRENT_ADDRESS_ID),{headers:{"Cache-Control":"no-cache"}}).then(t):e.get(n("/get_page_data/?cai="+o.CURRENT_ADDRESS_ID)).then(t)}function i(){function t(e){"use strict";return e.data}var r="/get_menu/?",a=document.getElementById("city_id");return r+=a&&a.value?"city_id="+Number(a.value):"cai="+o.CURRENT_ADDRESS_ID,e.get(n(r)).then(t)}function s(){return t(function(e,t){e(f)})}function c(){function e(){m=!0}return g?g:g=t.when(!0).then(e)}function l(e){var o=g||c();return o.then(function(){return t.all(e)})["catch"](function(e){})}function d(t){"use strict";function o(e){var t=[];if(e.data.sub_cats){angular.forEach(e.data.sub_cats,function(e){var o=[];angular.forEach(e,function(e){var t={name:e.sub_category[0],slug:e.sub_category[1],url:e.sub_category[2]};if(t.search_term=e.search_term,e.l2_banner){var n={};n.type=e.l2_banner.type,angular.forEach(e.l2_banner.banners,function(e){n[e.display_name]=e}),t.banner=n}t.options=null,e.cats&&e.cats.length>0&&(t.options=[],angular.forEach(e.cats,function(e){var o={name:e.cat[0],slug:e.cat[1],url:e.cat[2]};t.options.push(o)})),o.push(t)}),o&&t.push(o)})}return t}return e.get(n("/get_sub_cat_menu/?category_id="+t)).then(o)}function u(t,o,r){function a(e){return e.data.response.results}return r?e.get("/bbplacessearch/getplaces/?term="+o+"&city_id="+t).then(a):e.get(n("/bb/get_area/?term="+o+"&city_id="+t)).then(a)}function p(e){return t.all(e).then(function(e){return!0})}var g,m=!1,f=null,h={getPageInfo:a,getLeftMenu:i,getShops:s,searchProducts:r,ready:l,getSubcategory:d,getAreasForCity:u,getRequestQueue:p};return h}angular.module("app.layout").factory("HeaderDataservice",e),e.$inject=["$http","$q","$window"],angular.module("app.layout").service("loginAndSignupService",["$http","$q",function(e,t){var o=function(e){var t="";return Object.keys(e).forEach(function(o){t+=o+"="+window.encodeURIComponent(e[o])+"&"}),t};this.submitForm=function(n,r,a){var i={method:"POST",url:r,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:o(n)},s=t.defer();return a&&(a.bbLoader=!0),e(i).then(function(e){a&&(a.bbLoader=!1),s.resolve(e)},function(e){a&&(a.bbLoader=!1),s.reject(e)}),s.promise},this.getRequest=function(o,n,r){var a={method:"GET",url:o,params:n},i=t.defer();return r&&(r.bbLoader=!0),e(a).then(function(e){r&&(r.bbLoader=!1),i.resolve(e)},function(e){r&&(r.bbLoader=!1),i.reject(e)}),i.promise},this.fb_login=function(e,t){"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Login","Login Action","Facebook Login"]);var o="/auth/fb/login/?sl="+e;t&&"string"==typeof t&&(o+="&ref_code="+encodeURIComponent(t)),location.href=o},this.gplus_login=function(e,t){"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Login","Login Action","Google Login"]);var o="/auth/gplus/login/?sl="+e;t&&"string"==typeof t&&(o+="&ref_code="+encodeURIComponent(t)),location.href=o},this.get_captcha_url=function(){return e.get("/captcha/get_new_captcha/").then(function(e){return e})}}])}(),function(){"use strict";function e(e,t,o,n,r,a,i){function s(e){location.href="/auth/fb/login/?sl="+e}function c(e){location.href="/auth/gplus/login/?sl="+e}function l(){return t.ismember}function d(){P.memberinfo=o.getmembername()}function u(e,t){return Number(e)>=1e3?e:Number(t)+Number(e)}function p(e){o.deleteFromBasket(e.pid,e.quantity,t.sid).then(function(o){if(o.success){var n=R.findIndex(R.propEq("product_id",e.product_id))(P.cart.items);P.cart.items.splice(n,1),$("#totalNumberOfCartItems").html(o.num_items+" items"),$("#mobiletotalNumberOfCartItems").html(o.num_items),t.$broadcast("CART_ITEM_CHANGED",{sku:e.pid,qty:0}),_(e.pid,0),v(e.pid,o.basket_widget),typeof updateEngagementStore==typeof Function?updateEngagementStore(e.pid,0):"";var r=Number(e.mrp)+Number(e.saving);$(document).trigger("basketInteractionsPlowerWithAngular",[{EventName:"Basket_Remove",SkuID:e.pid,Quantity:e.quantity,UnitMrp:r,UnitSalePrice:Number(e.mrp),ScreenInPageContext:"basket"}]),P.getCartDetails()}});var n=document.getElementById("sku_to_update");n&&(n.value=e.pid,n.click())}function g(){P.showbb||(P.showbb=!0,P.timer=n(function(){P.basketDrop=!0,P.getCartDetails(),0!=P.cart.cart_no_items&&P.sendDataToGTM(P.cart)},500))}function m(){P.showbb&&(P.showbb=!1,n.cancel(P.timer),P.basketDrop=!1)}function f(e){$.isNumeric(e.quantity)&&(e.quantity>0&&e.quantity<25?o.updateCartQuantity(e.pid,Number(e.quantity),t.sid).then(function(o){o.success&&(e.quantity=o.ana_md.qty,t.$broadcast("CART_ITEM_CHANGED",{sku:e.pid,qty:e.quantity}),_(e.pid,e.quantity),typeof updateEngagementStore==typeof Function?updateEngagementStore(e.pid,0):"")}):0===Number(e.quantity)&&p(e))}function h(e){if(Number(e.quantity)>1){var n=Number(e.quantity)-1;o.updateCartQuantity(e.pid,n,t.sid).then(function(o){if(o.success){e.quantity=o.ana_md.qty,t.$broadcast("CART_ITEM_CHANGED",{sku:e.pid,qty:n}),_(e.pid,n),typeof updateEngagementStore==typeof Function?updateEngagementStore(e.pid,0):"";var r=Number(e.mrp)+Number(o.p_saving)/o.ana_md.qty;$(document).trigger("basketInteractionsPlowerWithAngular",[{EventName:"Basket_Decrement",SkuID:e.pid,Quantity:1,UnitMrp:r,UnitSalePrice:Number(e.mrp),ScreenInPageContext:"basket"}]),P.getCartDetails()}})}else p(e)}function _(e,t){"/basket/&nc=basket"===window.location.pathname?($("#p_"+e).val(t),refresh()):$("#p_"+e).val(t+" in basket"),$("#p"+e+"_cart").val(t)}function v(e,t){init_page_data(),init_basket(),$("li[name='widget_"+e+"'] .uiv2-add-to-basket").html(t),init_a2c_for_selector('li[name="widget_'+e+'"] .a2c'),$('li[name="widget_'+e+'"].uiv2-selected-product').length>=1&&$('li[name="widget_'+e+'"]').removeClass("uiv2-selected-product");var o=$("#a2c-pd-"+e).val();1==o&&$('li[name="widget_'+e+'"]').removeClass("uiv2-selected-product")}function b(e){if(Number(e.quantity)<25){var n=Number(e.quantity)+1;o.updateCartQuantity(e.pid,n,t.sid).then(function(o){if(o.success){e.quantity=o.ana_md.qty,t.$broadcast("CART_ITEM_CHANGED",{sku:e.pid,qty:n}),_(e.pid,n),typeof updateEngagementStore==typeof Function?updateEngagementStore(e.pid,0):"",P.getCartDetails();var r=Number(e.mrp)+Number(o.p_saving)/o.ana_md.qty;$(document).trigger("basketInteractionsPlowerWithAngular",[{EventName:"Basket_Increment",SkuID:e.pid,Quantity:1,UnitMrp:r,UnitSalePrice:Number(e.mrp),ScreenInPageContext:"basket"}])}})}}function y(){for(var e,t=3,o=document.createElement("div"),n=o.getElementsByTagName("i");o.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",n[0];);return t>4?t:e}function w(t){var o="True"==window.ISB2B;if($(document).trigger("screenViewReferralsEvent",[{}]),t>0)if("hpcp"===PAGE_TYPE&&!i.get("_bb_mid")&&"function"==typeof a.open&&window.NEW_LOGIN_FLOW){if(void 0!==is_returning_user&&is_returning_user)var n="login";else var n="signup";if(o&&"signup"==n)return void(location.href="/signup/");P.is_ie()<10&&(window.location.href="/auth/"+n+"/?next="+next);var r=a.open({templateUrl:"app/templates/innertemplates/loginAndSignupBaseTemplate.html",scope:e,controller:"loginAndSignupBase",controllerAs:"loginAndSignupBase",resolve:{modalData:function(){return{tab:n,pageContext:"basket",next:"/basket/?ver=1"}}},backdrop:"static",windowClass:"signup-modal",keyboard:!1});r.result.then(function(e){},function(){})}else location.href="/basket/?ver=1"}function S(e){if(e.items){for(var t=e.items,o=[],n=0;n<t.length;n++)o.push({id:t[n].pid,price:t[n].mrp,quantity:t[n].quantity});dataLayer.push({view_basket_details:o}),dataLayer.push({event:"view_basket_mouse_hover"})}}function k(){return o.getCart().then(function(e){P.cart=e,null!=P.cart.basket_banner&&(P.cart.basket_banner["Image name"]=MEDIA_URL+P.cart.basket_banner["Image name"]),Number(e.cart_total)>=Number(e.delivery_limit)?P.cart.free_delivery=!0:P.cart.free_delivery=!1,$("#totalNumberOfCartItems").html(P.cart.cart_no_items+" items"),$("#mobiletotalNumberOfCartItems").html(P.cart.cart_no_items)})}function C(){void 0!=PAGE_TYPE&&"hpcp"===PAGE_TYPE}var P=this;P.cart={},P.cart.cart_no_items=r.CART,P.updateCartQuantity=f,P.goToBasketPage=w,P.is_ie=y,P.deleteFromBasket=p,P.decreamentQuantity=h,P.increamentQuantity=b,P.updateOldPage=_,P.updateTheOldWidget=v,P.isMember=l,P.getMemberinfo=d,P.grandTotal=u,P.USED_STATIC_URL=USED_STATIC_URL,P.fb_login=s,P.gplus_login=c,t.cart=P.cart,P.getCartDetails=k,P.sendDataToGTM=S,P.showBasket=g,P.hideBasket=m,P.basketDrop=!1,P.timer={},C(),t.$on("getCart",function(e,t){P.getCartDetails()})}function t(){return{restrict:"E",templateUrl:"app/templates/innertemplates/bigbasketCartTemplate.html",scope:{},controller:["$scope","$rootScope","UserDataservice","$timeout","$window","$uibModal","$cookies",e],controllerAs:"vm"}}function o(){function e(e,t,o){}return{restrict:"E",templateUrl:"app/templates/innertemplates/searchProductsTemplate.html",link:e}}function n(e){function t(e,t,o){}return{restrict:"E",templateUrl:"app/templates/innertemplates/megaNav.html",link:t}}function r(e){function t(e,t,o){}return{restrict:"E",templateUrl:"app/templates/innertemplates/megaNavSticky.html",link:t}}function a(e){function t(e,t,o){}return{restrict:"E",templateUrl:"app/templates/innertemplates/DesktopLeftMenuL2template.html",link:t}}n.$inject=["$timeout"],r.$inject=["$timeout"],e.$inject=["$scope","$rootScope","UserDataservice","$timeout","$window","$uibModal","$cookies"],angular.module("app.layout").directive("megaNavTemplate",n).directive("megaNavStickyTemplate",r).directive("leftSubcategoryTemplate",a).directive("searchProductsTemplate",o).directive("bigbasketCartTemplate",t);var i=e;i.$inject=["$scope","$rootScope","UserDataservice","$timeout","$window","$uibModal","$cookies"],angular.module("app.layout").controller("oldPageCompatibilityCartController",i),a.$inject=["$timeout"],angular.module("app.layout").filter("ToInt",["$filter",function(e){return function(e){return e?(e=parseFloat(e),e=e.toFixed(e%1===0?0:2),""+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"")):"0"}}])}(),function(e){"use strict";e(".nav-pills > li ").hover(function(){e(this).hasClass("hoverblock")||e(this).find("a").tab("show")}),e(".nav-tabs > li").find("a").click(function(){e(this).parent().siblings().addClass("hoverblock")}),jQuery(document).ready(function(e){var t=e("#navbar-main"),o=e(window);e("#left-menu-overlay").click(function(){e("#left-menu-overlay").fadeOut("slow"),e("body").removeClass("toggle-scroll"),e(".new-to-bb").removeClass("drop-z-index")}),e(window).on("resize",function(){if(window.innerWidth<=991){e("#navbar-main").addClass("navbar-fixed-top"),e(".body-wrap").css("padding-top","70px");var n=document.getElementById("order-assistant");if(n){var r=n.clientHeight;e(n).addClass("fixed"),t[0].style.top=r+"px"}}else e(".body-wrap").css("padding-top","0px"),t.removeClass("navbar-fixed-top"),e(".search-bar input").attr("placeholder","Search for Products.."),o.scroll(function(){var n=document.getElementById("order-assistant");if(o.scrollTop()>=30){if(t.addClass("navbar-fixed-top"),e("body").css("padding-top","45px"),e(".bb-logo").removeClass("change-logo"),e(".bb-logo").addClass("icon"),n){var r=n.clientHeight;e(n).addClass("fixed"),t[0].style.top=r+"px"}}else t.removeClass("navbar-fixed-top"),e("body").css("padding-top","0px"),e(".bb-logo").addClass("change-logo"),e(".bb-logo").removeClass("icon"),n&&(t[0].style.top="0",e(n).removeClass("fixed"))})}).trigger("resize")}),e("#mega-desktop-navigation .dropdown").hover(function(){e(this).addClass("open")},function(){e(this).removeClass("open")}),e("div.panel-collapse").on("show.bs.collapse",function(){e(this).parent("div").find(".fa-chevron-right").removeClass("fa fa-chevron-right").addClass("fa fa-chevron-down")}),e("div.panel-collapse").on("hide.bs.collapse",function(){e(this).parent("div").find(".fa-chevron-down").removeClass("fa fa-chevron-down").addClass("fa fa-chevron-right")}),e(".submenu").on("click",function(){e(this).find("ul").slideToggle(),e(this).find("i").toggleClass("fa-plus fa-minus")})}($),$(document).ready(function(){$(".skip").on("click",function(){$(".error_loc_msg").hide()}),$(".register-options").on("click",function(){$(".visible-div").hide(),$(".hidden-div").show()}),$(".citychange").on("click",function(){$(".visible-div").show(),$(".hidden-div").hide(),$(".error_loc_msg").hide()}),$("div.panel-collapse").on("show.bs.collapse",function(){$(this).parent("div").find(".fa-chevron-right").removeClass("fa fa-chevron-right").addClass("fa fa-chevron-down")}),$("div.panel-collapse").on("hide.bs.collapse",function(){$(this).parent("div").find(".fa-chevron-down").removeClass("fa fa-chevron-down").addClass("fa fa-chevron-right")})}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(document.body).on("click",".dropdown-menu.drop-select li a",function(e){var t=$(e.currentTarget);return t.closest(".btn-group").find('[data-bind="label"]').text(t.text()).end().children(".dropdown-toggle").dropdown("toggle"),!1}),$(document).ready(function(){$(".po-markup > .po-link-addr").popover({trigger:"hover",html:!0,title:function(){return $(this).parent().find(".po-title").html()},content:function(){return $(this).parent().find(".po-body").html()},container:"body",placement:"bottom"}),$("div.create-list").on("click.bs.dropdown",function(e){var t=$(e.target),o=t.is(".is_a");t.hasClass("dropdown-toggle")&&($("ul.dropdown-menu",this).toggle(!o),t.toggleClass("is_a",!o))}).on("mouseleave",function(){$("ul.dropdown-menu",this).hide(),$(".is_a",this).removeClass("is_a"),$(".show-list").hide()})}),$(function(){$(".button-checkbox").each(function(){function e(){var e=r.is(":checked");n.data("state",e?"on":"off"),n.find(".state-icon").removeClass().addClass("state-icon "+i[n.data("state")].icon),e?n.removeClass("btn-default").addClass("btn-"+a+" active"):n.removeClass("btn-"+a+" active").addClass("btn-default")}function t(){e(),0==n.find(".state-icon").length&&n.prepend('<i class="state-icon '+i[n.data("state")].icon+'"></i> ')}var o=$(this),n=o.find("button"),r=o.find("input:checkbox"),a=n.data("color"),i={on:{icon:"fa fa-check"},off:{icon:"fa fa-unchecked"}};n.on("click",function(){r.prop("checked",!r.is(":checked")),r.triggerHandler("change"),e()}),r.on("change",function(){e()}),t()})}),$("#fileUpload").on("change",function(){var e=$(this)[0].files.length,t=$(this)[0].value,o=t.substring(t.lastIndexOf(".")+1).toLowerCase(),n=$(".col-wrap");if(n.empty(),"gif"==o||"png"==o||"jpg"==o||"jpeg"==o)if("undefined"!=typeof FileReader)for(var r=0;r<e;r++){var a=new FileReader;a.onload=function(t){4==e||5==e?$(n).append('<li style="flex-basis:calc(100% / 4)"><img class="img-responsive" src="'+t.target.result+'"></li> '):e>=6?$(n).append('<li style="flex-basis:calc(100% / 6)"><img class="img-responsive" src="'+t.target.result+'"></li> '):alert("Please select minimum 4 images")},n.show(),a.readAsDataURL($(this)[0].files[r])}else alert("This browser does not support FileReader.");else alert("Pls select only images")}),$(document).ready(function(){$("#toTop").css("display","none"),$(window).scroll(function(){$(window).scrollTop()>200?$("#toTop").fadeIn("slow"):$("#toTop").fadeOut("slow")}),$("#toTop").click(function(){event.preventDefault(),$("html, body").animate({scrollTop:0},"slow")})}),$(".onscroll-dropdown").hover(function(){$(this).find(".dropdown-menu").stop(!0,!0).show()},function(){$(this).find(".dropdown-menu").stop(!0,!0).hide()});var BasketUrlBuilder=function(){var e=make_req_url("/basket/add/"),t=make_req_url("/basket/del-item/"),o=make_req_url("/basket/qty-update/"),n=make_req_url(""),r=make_req_url("/basket/empty-basket/"),a=make_req_url("/msl/add-list-item-to-basket/");return{withNodeCartUrl:function(){return e="/basketService/add/",t="/basketService/del-item/",o="/basketService/update-qty/",n="",r="/basketService/empty-cart/",a="/basketService/msl/add-list-item-to-basket/",this},build:function(){return{addToCartUrl:e,delItemUrl:t,updateQtyUrl:o,getCartUrl:n,emptyCartUrl:r,addListCartUrl:a}}}};if("undefined"==typeof jQuery){var headTag=document.getElementsByTagName("head")[0],jqTag=document.createElement("script");jqTag.type="text/javascript",jqTag.src="https://www.adjetter.com/static/assets/global/plugins/jquery.min.js",jqTag.onload=initializeKapture,headTag.appendChild(jqTag)}else initializeKaptureSupport();$(document).ready(function(){window.location.href.indexOf("branch_match_id")>-1&&setTimeout(function(){get_cookie("_bb_mid")?document.getElementById("kapchat-widget-btn").click():window.openLoginModal()},1e3)}),function(e){function t(t){var o=e(this),n=null,r=[],a=null,i=null,s=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),c=3,l=300,d=function(e){r.push({x:e.pageX,y:e.pageY}),r.length>c&&r.shift()},u=function(){i&&clearTimeout(i),s.exitMenu(this)&&(n&&s.deactivate(n),n=null)},p=function(){i&&clearTimeout(i),s.enter(this),h(this)},g=function(){s.exit(this)},m=function(){f(this)},f=function(e){e!=n&&(n&&s.deactivate(n),s.activate(e),n=e)},h=function(e){var t=_();t?i=setTimeout(function(){h(e)},t):f(e)},_=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!n||!e(n).is(s.submenuSelector))return 0;var i=o.offset(),c={x:i.left,y:i.top-s.tolerance},d={x:i.left+o.outerWidth(),y:c.y},u={x:i.left,y:i.top+o.outerHeight()+s.tolerance},p={x:i.left+o.outerWidth(),y:u.y},g=r[r.length-1],m=r[0];if(!g)return 0;if(m||(m=g),m.x<i.left||m.x>p.x||m.y<i.top||m.y>p.y)return 0;if(a&&g.x==a.x&&g.y==a.y)return 0;var f=d,h=p;"left"==s.submenuDirection?(f=u,h=c):"below"==s.submenuDirection?(f=p,h=u):"above"==s.submenuDirection&&(f=c,h=d);var _=t(g,f),v=t(g,h),b=t(m,f),y=t(m,h);return _<b&&v>y?(a=g,l):(a=null,0)};o.mouseleave(u).find(s.rowSelector).mouseenter(p).mouseleave(g).click(m),e(document).mousemove(d)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}(jQuery),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var o=e.data(this[0],"validator");return o?o:(this.attr("novalidate","novalidate"),o=new e.validator(t,this[0]),e.data(this[0],"validator",o),o.settings.onsubmit&&(this.on("click.validate",":submit",function(t){o.settings.submitHandler&&(o.submitButton=t.target),e(this).hasClass("cancel")&&(o.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(o.cancelSubmit=!0)}),this.on("submit.validate",function(t){function n(){var n,r;return!o.settings.submitHandler||(o.submitButton&&(n=e("<input type='hidden'/>").attr("name",o.submitButton.name).val(e(o.submitButton).val()).appendTo(o.currentForm)),r=o.settings.submitHandler.call(o,o.currentForm,t),o.submitButton&&n.remove(),void 0!==r&&r)}return o.settings.debug&&t.preventDefault(),o.cancelSubmit?(o.cancelSubmit=!1,n()):o.form()?o.pendingRequest?(o.formSubmitted=!0,!1):n():(o.focusInvalid(),!1)})),o)},valid:function(){var t,o,n;return e(this[0]).is("form")?t=this.validate().form():(n=[],t=!0,o=e(this[0].form).validate(),this.each(function(){t=o.element(this)&&t,t||(n=n.concat(o.errorList))}),o.errorList=n),t},rules:function(t,o){var n,r,a,i,s,c,l=this[0];if(null!=l&&null!=l.form){if(t)switch(n=e.data(l.form,"validator").settings,r=n.rules,a=e.validator.staticRules(l),t){case"add":e.extend(a,e.validator.normalizeRule(o)),delete a.messages,r[l.name]=a,o.messages&&(n.messages[l.name]=e.extend(n.messages[l.name],o.messages));break;case"remove":return o?(c={},e.each(o.split(/\s/),function(t,o){c[o]=a[o],delete a[o],"required"===o&&e(l).removeAttr("aria-required")}),c):(delete r[l.name],a)}return i=e.validator.normalizeRules(e.extend({},e.validator.classRules(l),e.validator.attributeRules(l),e.validator.dataRules(l),e.validator.staticRules(l)),l),i.required&&(s=i.required,delete i.required,i=e.extend({required:s},i),e(l).attr("aria-required","true")),i.remote&&(s=i.remote,delete i.remote,i=e.extend(i,{remote:s})),i}}}),e.extend(e.expr.pseudos||e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var o=e(t).val();return null!==o&&!!e.trim(""+o)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,o){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=o,this.init()},e.validator.format=function(t,o){return 1===arguments.length?function(){var o=e.makeArray(arguments);return o.unshift(t),e.validator.format.apply(this,o)}:void 0===o?t:(arguments.length>2&&o.constructor!==Array&&(o=e.makeArray(arguments).slice(1)),o.constructor!==Array&&(o=[o]),e.each(o,function(e,o){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return o})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,o){var n=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===o.which&&""===this.elementValue(t)||e.inArray(o.keyCode,n)!==-1||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,o,n){"radio"===t.type?this.findByName(t.name).addClass(o).removeClass(n):e(t).addClass(o).removeClass(n)},unhighlight:function(t,o,n){"radio"===t.type?this.findByName(t.name).removeClass(o).addClass(n):e(t).removeClass(o).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){!this.form&&this.hasAttribute("contenteditable")&&(this.form=e(this).closest("form")[0]);var o=e.data(this.form,"validator"),n="on"+t.type.replace(/^validate/,""),r=o.settings;r[n]&&!e(this).is(r.ignore)&&r[n].call(o,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var o,n=this.groups={};e.each(this.settings.groups,function(t,o){"string"==typeof o&&(o=o.split(/\s/)),e.each(o,function(e,o){n[o]=t})}),o=this.settings.rules,e.each(o,function(t,n){o[t]=e.validator.normalizeRule(n)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var o,n,r=this.clean(t),a=this.validationTargetFor(r),i=this,s=!0;return void 0===a?delete this.invalid[r.name]:(this.prepareElement(a),this.currentElements=e(a),n=this.groups[a.name],n&&e.each(this.groups,function(e,t){t===n&&e!==a.name&&(r=i.validationTargetFor(i.clean(i.findByName(e))),r&&r.name in i.invalid&&(i.currentElements.push(r),s=i.check(r)&&s))}),o=this.check(a)!==!1,s=s&&o,o?this.invalid[a.name]=!1:this.invalid[a.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!o)),s},showErrors:function(t){if(t){var o=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:o.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,o=0;for(t in e)e[t]&&o++;return o},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,o={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var n=this.name||e(this).attr("name");return!n&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=e(this).closest("form")[0]),!(n in o||!t.objectLength(e(this).rules())||(o[n]=!0,0))})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var o,n,r=e(t),a=t.type;return"radio"===a||"checkbox"===a?this.findByName(t.name).filter(":checked").val():"number"===a&&"undefined"!=typeof t.validity?t.validity.badInput?"NaN":r.val():(o=t.hasAttribute("contenteditable")?r.text():r.val(),"file"===a?"C:\\fakepath\\"===o.substr(0,12)?o.substr(12):(n=o.lastIndexOf("/"),n>=0?o.substr(n+1):(n=o.lastIndexOf("\\"),n>=0?o.substr(n+1):o)):"string"==typeof o?o.replace(/\r/g,""):o)},check:function(t){t=this.validationTargetFor(this.clean(t));var o,n,r,a=e(t).rules(),i=e.map(a,function(e,t){return t}).length,s=!1,c=this.elementValue(t);if("function"==typeof a.normalizer){if(c=a.normalizer.call(t,c),"string"!=typeof c)throw new TypeError("The normalizer should return a string value.");delete a.normalizer}for(n in a){r={method:n,parameters:a[n]};try{if(o=e.validator.methods[n].call(this,c,t,r.parameters),"dependency-mismatch"===o&&1===i){s=!0;continue}if(s=!1,"pending"===o)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!o)return this.formatAndAdd(t,r),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",l),l instanceof TypeError&&(l.message+=".  Exception occurred when checking element "+t.id+", check the '"+r.method+"' method."),l}}if(!s)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(t,o){return e(t).data("msg"+o.charAt(0).toUpperCase()+o.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var o=this.settings.messages[e];return o&&(o.constructor===String?o:o[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,o){"string"==typeof o&&(o={method:o});var n=this.findDefined(this.customMessage(t.name,o.method),this.customDataMessage(t,o.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[o.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,o.parameters,t):r.test(n)&&(n=e.validator.format(n.replace(r,"{$1}"),o.parameters)),n},formatAndAdd:function(e,t){var o=this.defaultMessage(e,t);this.errorList.push({message:o,element:e,method:t.method}),this.errorMap[e.name]=o,this.submitted[e.name]=o},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,o;for(e=0;this.errorList[e];e++)o=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,o.element,this.settings.errorClass,this.settings.validClass),this.showLabel(o.element,o.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,o){var n,r,a,i,s=this.errorsFor(t),c=this.idOrName(t),l=e(t).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(o)):(s=e("<"+this.settings.errorElement+">").attr("id",c+"-error").addClass(this.settings.errorClass).html(o||""),n=s,this.settings.wrapper&&(n=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,e(t)):n.insertAfter(t),s.is("label")?s.attr("for",c):0===s.parents("label[for='"+this.escapeCssMeta(c)+"']").length&&(a=s.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(a)+"\\b"))||(l+=" "+a):l=a,e(t).attr("aria-describedby",l),r=this.groups[t.name],r&&(i=this,e.each(i.groups,function(t,o){
o===r&&e("[name='"+i.escapeCssMeta(t)+"']",i.currentForm).attr("aria-describedby",s.attr("id"))})))),!o&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,t)),this.toShow=this.toShow.add(s)},errorsFor:function(t){var o=this.escapeCssMeta(this.idOrName(t)),n=e(t).attr("aria-describedby"),r="label[for='"+o+"'], label[for='"+o+"'] *";return n&&(r=r+", #"+this.escapeCssMeta(n).replace(/\s+/g,", #")),this.errors().filter(r)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,o){switch(o.nodeName.toLowerCase()){case"select":return e("option:selected",o).length;case"input":if(this.checkable(o))return this.findByName(o.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{"boolean":function(e){return e},string:function(t,o){return!!e(t,o.form).length},"function":function(e,t){return e(t)}},optional:function(t){var o=this.elementValue(t);return!e.validator.methods.required.call(this,o,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,o){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),o&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!o&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,o){return o="string"==typeof o&&o||"remote",e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:o})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,o){t.constructor===String?this.classRuleSettings[t]=o:e.extend(this.classRuleSettings,t)},classRules:function(t){var o={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(o,e.validator.classRuleSettings[this])}),o},normalizeAttributeRule:function(e,t,o,n){/min|max|step/.test(o)&&(null===t||/number|range|text/.test(t))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?e[o]=n:t===o&&"range"!==t&&(e[o]=!0)},attributeRules:function(t){var o,n,r={},a=e(t),i=t.getAttribute("type");for(o in e.validator.methods)"required"===o?(n=t.getAttribute(o),""===n&&(n=!0),n=!!n):n=a.attr(o),this.normalizeAttributeRule(r,i,o,n);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(t){var o,n,r={},a=e(t),i=t.getAttribute("type");for(o in e.validator.methods)n=a.data("rule"+o.charAt(0).toUpperCase()+o.substring(1).toLowerCase()),this.normalizeAttributeRule(r,i,o,n);return r},staticRules:function(t){var o={},n=e.data(t.form,"validator");return n.settings.rules&&(o=e.validator.normalizeRule(n.settings.rules[t.name])||{}),o},normalizeRules:function(t,o){return e.each(t,function(n,r){if(r===!1)return void delete t[n];if(r.param||r.depends){var a=!0;switch(typeof r.depends){case"string":a=!!e(r.depends,o.form).length;break;case"function":a=r.depends.call(o,o)}a?t[n]=void 0===r.param||r.param:(e.data(o.form,"validator").resetElements(e(o)),delete t[n])}}),e.each(t,function(n,r){t[n]=e.isFunction(r)&&"normalizer"!==n?r(o):r}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var o;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(o=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(o[0]),Number(o[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var o={};e.each(t.split(/\s/),function(){o[this]=!0}),t=o}return t},addMethod:function(t,o,n){e.validator.methods[t]=o,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],o.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,o,n){if(!this.depend(n,o))return"dependency-mismatch";if("select"===o.nodeName.toLowerCase()){var r=e(o).val();return r&&r.length>0}return this.checkable(o)?this.getLength(t,o)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,o,n){var r=e.isArray(t)?t.length:this.getLength(t,o);return this.optional(o)||r>=n},maxlength:function(t,o,n){var r=e.isArray(t)?t.length:this.getLength(t,o);return this.optional(o)||r<=n},rangelength:function(t,o,n){var r=e.isArray(t)?t.length:this.getLength(t,o);return this.optional(o)||r>=n[0]&&r<=n[1]},min:function(e,t,o){return this.optional(t)||e>=o},max:function(e,t,o){return this.optional(t)||e<=o},range:function(e,t,o){return this.optional(t)||e>=o[0]&&e<=o[1]},step:function(t,o,n){var r,a=e(o).attr("type"),i="Step attribute on input type "+a+" is not supported.",s=["text","number","range"],c=new RegExp("\\b"+a+"\\b"),l=a&&!c.test(s.join()),d=function(e){var t=(""+e).match(/(?:\.(\d+))?$/);return t&&t[1]?t[1].length:0},u=function(e){return Math.round(e*Math.pow(10,r))},p=!0;if(l)throw new Error(i);return r=d(n),(d(t)>r||u(t)%u(n)!==0)&&(p=!1),this.optional(o)||p},equalTo:function(t,o,n){var r=e(n);return this.settings.onfocusout&&r.not(".validate-equalTo-blur").length&&r.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(o).valid()}),t===r.val()},remote:function(t,o,n,r){if(this.optional(o))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var a,i,s,c=this.previousValue(o,r);return this.settings.messages[o.name]||(this.settings.messages[o.name]={}),c.originalMessage=c.originalMessage||this.settings.messages[o.name][r],this.settings.messages[o.name][r]=c.message,n="string"==typeof n&&{url:n}||n,s=e.param(e.extend({data:t},n.data)),c.old===s?c.valid:(c.old=s,a=this,this.startRequest(o),i={},i[o.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+o.name,dataType:"json",data:i,context:a.currentForm,success:function(e){var n,i,s,l=e===!0||"true"===e;a.settings.messages[o.name][r]=c.originalMessage,l?(s=a.formSubmitted,a.resetInternals(),a.toHide=a.errorsFor(o),a.formSubmitted=s,a.successList.push(o),a.invalid[o.name]=!1,a.showErrors()):(n={},i=e||a.defaultMessage(o,{method:r,parameters:t}),n[o.name]=c.message=i,a.invalid[o.name]=!0,a.showErrors(n)),c.valid=l,a.stopRequest(o,l)}},n)),"pending")}}});var t,o={};return e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,n){var r=e.port;"abort"===e.mode&&(o[r]&&o[r].abort(),o[r]=n)}):(t=e.ajax,e.ajax=function(n){var r=("mode"in n?n:e.ajaxSettings).mode,a=("port"in n?n:e.ajaxSettings).port;return"abort"===r?(o[a]&&o[a].abort(),o[a]=t.apply(this,arguments),o[a]):t.apply(this,arguments)}),e}),$(document).ready(function(e){function t(e){var t=$(e),o=t.data("submenuId"),r=$("#"+o),a=(n.outerHeight(),n.outerWidth());r.css({display:"block",top:-1,left:a-3}),t.find("a").addClass("maintainHover")}function o(e){var t=$(e),o=t.data("submenuId"),n=$("#"+o);n.css("display","none"),t.find("a").removeClass("maintainHover")}var n=$("#navBar");$("#navBar").menuAim({activate:t,deactivate:o});var n=$("#navBar-sticky");$("#navBar-sticky").menuAim({activate:t,deactivate:o}),$(".dropdown.full-wid .dropdown-menu li").click(function(e){e.stopPropagation()}),$(document).click(function(){$(".popover").css("display","none"),$("a.maintainHover").removeClass("maintainHover")})});